<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="villa-title">Villa Details - KhanelConcept</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Découvrez tous les détails de votre villa de luxe en Martinique - KhanelConcept">
    <meta name="keywords" content="villa, martinique, location, luxe, détails, réservation">
    
    <!-- External Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    
    <style>
        /* Variables CSS héritées de l'index */
        :root {
            --primary-color: #0080ff;
            --secondary-color: #00bcd4;
            --accent-color: #ff6b35;
            --text-light: #ffffff;
            --text-dark: #333333;
            --glass-background: rgba(255, 255, 255, 0.15);
            --glass-border: rgba(255, 255, 255, 0.3);
            --shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-light);
            overflow-x: hidden;
            background: linear-gradient(135deg, rgba(0, 128, 255, 0.3), rgba(0, 188, 212, 0.2));
            min-height: 100vh;
        }

        /* Background Video */
        .video-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -2;
            overflow: hidden;
        }

        .video-background video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(0, 128, 255, 0.4) 0%, rgba(0, 188, 212, 0.3) 50%, rgba(255, 107, 53, 0.2) 100%);
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 1000;
            padding: 0 1rem;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-light);
            text-decoration: none;
            cursor: pointer;
        }

        .logo i {
            color: var(--accent-color);
            font-size: 1.8rem;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: var(--text-light);
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            backdrop-filter: blur(10px);
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        /* Main Content */
        .main-content {
            margin-top: 90px;
            padding: 2rem 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* Villa Details Layout */
        .villa-details {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        /* Villa Header */
        .villa-header {
            background: var(--glass-background);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .villa-name {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--text-light) 0%, var(--secondary-color) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .villa-location {
            font-size: 1.25rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .villa-price {
            font-size: 3rem;
            font-weight: 700;
            color: var(--accent-color);
            margin-bottom: 0.5rem;
        }

        .villa-price small {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            font-weight: normal;
        }

        .villa-guests-detail {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.8);
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 15px;
            display: inline-block;
        }

        /* Gallery Section */
        .villa-gallery {
            background: var(--glass-background);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow);
        }

        .gallery-title {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            text-align: center;
            color: var(--text-light);
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .gallery-item {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
            aspect-ratio: 4/3;
        }

        .gallery-item:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }

        .gallery-fallback {
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.2);
            color: rgba(255, 255, 255, 0.6);
            font-size: 3rem;
            width: 100%;
            height: 100%;
        }

        /* Info Section */
        .villa-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .info-card {
            background: var(--glass-background);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow);
        }

        .info-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--text-light);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .info-card p, .info-card ul {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 1rem;
        }

        .info-card ul {
            list-style: none;
            padding: 0;
        }

        .info-card li {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .info-card li:last-child {
            border-bottom: none;
        }

        .info-card li i {
            color: var(--accent-color);
            width: 20px;
        }

        /* Features Grid */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .feature-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            transition: var(--transition);
        }

        .feature-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .feature-item i {
            font-size: 2rem;
            color: var(--accent-color);
            margin-bottom: 0.5rem;
            display: block;
        }

        /* Catalogue Images */
        .catalogue-images {
            background: var(--glass-background);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow);
        }

        .catalogue-images h3 {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            text-align: center;
            color: var(--text-light);
        }

        .catalogue-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .catalogue-item {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: var(--transition);
        }

        .catalogue-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .catalogue-item img {
            width: 100%;
            height: auto;
            display: block;
        }

        /* Reservation Section */
        .reservation-section {
            background: var(--glass-background);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .reservation-title {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        .reservation-subtitle {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 2rem;
        }

        .btn-reserve {
            background: linear-gradient(135deg, var(--accent-color) 0%, #e55a2b 100%);
            color: white;
            padding: 1.25rem 3rem;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 1rem;
            box-shadow: 0 8px 25px rgba(255, 107, 53, 0.3);
        }

        .btn-reserve:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(255, 107, 53, 0.4);
        }

        .btn-reserve i {
            font-size: 1.3rem;
        }

        /* Modal Gallery */
        .gallery-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .gallery-modal.active {
            display: flex;
        }

        .modal-content {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
        }

        .modal-image {
            width: 100%;
            height: auto;
            max-height: 90vh;
            object-fit: contain;
            border-radius: 10px;
        }

        .modal-close {
            position: absolute;
            top: -50px;
            right: 0;
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            padding: 10px;
        }

        .modal-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 2rem;
            padding: 1rem;
            cursor: pointer;
            border-radius: 50%;
            transition: var(--transition);
        }

        .modal-nav:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .modal-prev {
            left: -60px;
        }

        .modal-next {
            right: -60px;
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 4rem 0;
            color: var(--text-light);
            font-size: 1.2rem;
        }

        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .villa-name {
                font-size: 2rem;
            }

            .villa-price {
                font-size: 2.5rem;
            }

            .gallery-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }

            .info-card {
                padding: 1.5rem;
            }

            .modal-nav {
                display: none;
            }

            .modal-content {
                max-width: 95vw;
            }

            .btn-reserve {
                padding: 1rem 2rem;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Background Video -->
    <div class="video-background">
        <video autoplay muted loop playsinline preload="auto">
            <source src="https://res.cloudinary.com/ddulasmtz/video/upload/v1752950782/background-video.mp4_qoofsz.mp4" type="video/mp4">
            Votre navigateur ne supporte pas la lecture de vidéos HTML5.
        </video>
        <div class="video-overlay"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo" onclick="window.location.href='index.html'">
                <i class="fas fa-palm-tree"></i>
                KhanelConcept
            </div>
            
            <a href="index.html" class="back-btn">
                <i class="fas fa-arrow-left"></i>
                Retour à l'accueil
            </a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Loading State -->
            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p>Chargement des détails de la villa...</p>
            </div>

            <!-- Villa Details -->
            <div id="villa-details" class="villa-details" style="display: none;">
                <!-- Villa Header -->
                <section class="villa-header">
                    <h1 class="villa-name" id="villa-name">Villa Name</h1>
                    <div class="villa-location" id="villa-location">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Location</span>
                    </div>
                    <div class="villa-price" id="villa-price">
                        0€ <small>/nuit</small>
                    </div>
                    <div class="villa-guests-detail" id="villa-guests-detail">
                        Capacité d'accueil
                    </div>
                </section>

                <!-- Gallery Section -->
                <section class="villa-gallery">
                    <h2 class="gallery-title">
                        <i class="fas fa-images"></i>
                        Galerie Photos
                    </h2>
                    <div class="gallery-grid" id="gallery-grid">
                        <!-- Images will be loaded dynamically -->
                    </div>
                </section>

                <!-- Villa Information -->
                <section class="villa-info">
                    <!-- Description -->
                    <div class="info-card">
                        <h3><i class="fas fa-info-circle"></i> Description</h3>
                        <p id="villa-description">Description de la villa...</p>
                        <div id="villa-features">Features will be loaded here</div>
                    </div>

                    <!-- Amenities -->
                    <div class="info-card">
                        <h3><i class="fas fa-star"></i> Équipements</h3>
                        <ul id="villa-amenities">
                            <!-- Amenities will be loaded dynamically -->
                        </ul>
                    </div>
                </section>

                <!-- Catalogue Images Section -->
                <section class="catalogue-images" id="catalogue-section">
                    <h3>
                        <i class="fas fa-file-image"></i>
                        Informations & Tarifs Détaillés
                    </h3>
                    <div class="catalogue-grid" id="catalogue-grid">
                        <!-- Catalogue images will be loaded here -->
                    </div>
                </section>

                <!-- Reservation Section -->
                <section class="reservation-section">
                    <h2 class="reservation-title">
                        <i class="fas fa-calendar-check"></i>
                        Prêt à réserver ?
                    </h2>
                    <p class="reservation-subtitle">
                        Contactez-nous pour vérifier les disponibilités et finaliser votre réservation
                    </p>
                    <a href="#" class="btn-reserve" id="btn-reserve">
                        <i class="fas fa-phone"></i>
                        Réserver Maintenant
                    </a>
                </section>
            </div>

            <!-- Error State -->
            <div id="error-state" class="loading" style="display: none;">
                <p><i class="fas fa-exclamation-triangle"></i> Villa non trouvée</p>
                <a href="index.html" class="back-btn">Retour à l'accueil</a>
            </div>
        </div>
    </main>

    <!-- Gallery Modal -->
    <div id="gallery-modal" class="gallery-modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeGalleryModal()">
                <i class="fas fa-times"></i>
            </button>
            <button class="modal-nav modal-prev" onclick="previousModalImage()">
                <i class="fas fa-chevron-left"></i>
            </button>
            <img id="modal-image" class="modal-image" src="" alt="">
            <button class="modal-nav modal-next" onclick="nextModalImage()">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>

    <script>
        // Villa Data from backend structure - Complete 22 villas
        const villasData = [
            {
                id: 1,
                name: "Villa F3 Petit Macabou",
                location: "Petit Macabou au Vauclin",
                price: 850.0,
                guests: 6,
                guestsDetail: "6 personnes + 9 invités",
                features: "Sauna, Jacuzzi, 2 douches extérieures",
                category: "sejour",
                image: "./images/Villa_F3_Petit_Macabou/01_piscine_exterieur.jpg",
                gallery: [
                    "./images/Villa_F3_Petit_Macabou/01_piscine_exterieur.jpg",
                    "./images/Villa_F3_Petit_Macabou/02_terrasse_salon_exterieur.jpg",
                    "./images/Villa_F3_Petit_Macabou/03_salle_de_bain_moderne.jpg",
                    "./images/Villa_F3_Petit_Macabou/04_chambre_principale.jpg",
                    "./images/Villa_F3_Petit_Macabou/05_cuisine_equipee.jpg",
                    "./images/Villa_F3_Petit_Macabou/07_sauna_detente.jpg",
                    "./images/Villa_F3_Petit_Macabou/08_douche_exterieure.jpg"
                ],
                fallbackIcon: "🏊",
                amenities: [
                    {name: "Piscine extérieure", icon: "🏊"},
                    {name: "Sauna privé", icon: "🧖‍♀️"},
                    {name: "Jacuzzi", icon: "🛁"},
                    {name: "2 Douches extérieures", icon: "🚿"},
                    {name: "Cuisine équipée", icon: "🍳"},
                    {name: "WiFi haut débit", icon: "📶"},
                    {name: "Climatisation", icon: "❄️"},
                    {name: "Terrasse salon", icon: "🛋️"}
                ],
                description: "Cette magnifique villa F3 située au cœur de Petit Macabou au Vauclin représente l'essence même du luxe tropical martiniquais. Conçue pour offrir une expérience de détente absolue, elle dispose d'un sauna privé où vous pourrez vous relaxer après une journée ensoleillée, d'un jacuzzi bouillonnant pour des moments romantiques sous les étoiles, et de deux douches extérieures rafraîchissantes qui vous permettront de vous rincer tout en profitant de la brise caribéenne. La piscine extérieure, véritable joyau de la propriété, est entourée d'une terrasse spacieuse avec salon extérieur, parfaite pour des moments de convivialité. L'intérieur, moderne et élégant, comprend une cuisine entièrement équipée et des espaces de vie climatisés. Idéale pour les familles ou groupes d'amis cherchant authenticité et confort, cette villa peut accueillir jusqu'à 15 personnes pour vos événements privés."
            },
            {
                id: 2,
                name: "Villa F5 Ste Anne",
                location: "Quartier Les Anglais, Ste Anne",
                price: 1300.0,
                guests: 10,
                guestsDetail: "10 personnes + 15 invités",
                features: "Piscine, décoration rose distinctive",
                category: "sejour",
                image: "./images/Villa_F5_Ste_Anne/01_piscine_principale.jpg",
                gallery: [
                    "./images/Villa_F5_Ste_Anne/01_piscine_principale.jpg",
                    "./images/Villa_F5_Ste_Anne/02_piscine_vue_aerienne.jpg",
                    "./images/Villa_F5_Ste_Anne/03_facade_villa_rose.jpg",
                    "./images/Villa_F5_Ste_Anne/04_cuisine_moderne.jpg",
                    "./images/Villa_F5_Ste_Anne/05_salon_principal.jpg",
                    "./images/Villa_F5_Ste_Anne/06_chambre_principale.jpg"
                ],
                fallbackIcon: "🌸",
                amenities: [
                    {name: "Grande piscine", icon: "🏊"},
                    {name: "Cuisine moderne équipée", icon: "🍳"},
                    {name: "Grande terrasse", icon: "🌅"},
                    {name: "WiFi haut débit", icon: "📶"},
                    {name: "Climatisation", icon: "❄️"},
                    {name: "Parking privé", icon: "🚗"},
                    {name: "Salon spacieux", icon: "🛋️"},
                    {name: "Décoration unique", icon: "🎨"}
                ],
                description: "Impossible de passer à côté de cette villa F5 extraordinaire dans le quartier résidentiel des Anglais à Sainte-Anne ! Sa façade rose distinctive et son architecture créole modernisée en font un véritable bijou architectural. Cette spacieuse propriété de 5 pièces est parfaitement adaptée aux grands groupes et aux célébrations familiales. La piscine principale, véritable centre névralgique de la villa, offre un espace de baignade généreux entouré de transats et d'espaces de détente. L'intérieur, décoré avec goût dans des tons roses élégants, comprend un salon principal ouvert sur la terrasse, une cuisine moderne entièrement équipée et des chambres confortables. Située dans un quartier calme proche des plus belles plages de Sainte-Anne, cette villa vous permettra de profiter pleinement des charmes du sud de la Martinique tout en disposant d'un espace privatif exceptionnel."
            },
            {
                id: 3,
                name: "Villa F3 POUR LA BACCHA",
                location: "Petit Macabou",
                price: 1350.0,
                guests: 6,
                guestsDetail: "6 personnes + 9 convives",
                features: "Piscine, terrasses modernes",
                category: "sejour",
                image: "./images/Villa_F3_Baccha_Petit_Macabou/01_terrasse_piscine_salon_ext.jpg",
                gallery: [
                    "./images/Villa_F3_Baccha_Petit_Macabou/01_terrasse_piscine_salon_ext.jpg",
                    "./images/Villa_F3_Baccha_Petit_Macabou/02_terrasse_piscine_angle.jpg",
                    "./images/Villa_F3_Baccha_Petit_Macabou/03_chambre_moderne.jpg",
                    "./images/Villa_F3_Baccha_Petit_Macabou/04_terrasse_jardin.jpg",
                    "./images/Villa_F3_Baccha_Petit_Macabou/05_cuisine_equipee.jpg",
                    "./images/Villa_F3_Baccha_Petit_Macabou/06_chambre_2.jpg"
                ],
                fallbackIcon: "🏖️",
                amenities: ["Piscine", "Terrasses multiples", "Jardin", "Cuisine équipée", "WiFi", "Climatisation"],
                description: "Villa moderne avec terrasses magnifiques et espace piscine exceptionnel."
            },
            {
                id: 4,
                name: "Studio Cocooning Lamentin",
                location: "Morne Pitault, Lamentin",
                price: 290.0,
                guests: 2,
                guestsDetail: "2 personnes (couple)",
                features: "Jacuzzi privé, vue panoramique",
                category: "special",
                image: "./images/Studio_Cocooning_Lamentin/01_studio_vue_ensemble.jpg",
                gallery: [
                    "./images/Studio_Cocooning_Lamentin/01_studio_vue_ensemble.jpg",
                    "./images/Studio_Cocooning_Lamentin/02_cuisine_moderne.jpg",
                    "./images/Studio_Cocooning_Lamentin/03_terrasse_jacuzzi.jpg",
                    "./images/Studio_Cocooning_Lamentin/04_cuisine_ouverte.jpg",
                    "./images/Studio_Cocooning_Lamentin/05_chambre_salon.jpg",
                    "./images/Studio_Cocooning_Lamentin/07_chambre_mur_vert.jpg"
                ],
                fallbackIcon: "💕",
                amenities: ["Jacuzzi privé", "Vue panoramique", "Cuisine équipée", "WiFi", "Climatisation"],
                description: "Studio romantique parfait pour couples avec jacuzzi privé et vue imprenable."
            },
            {
                id: 5,
                name: "Villa Sunset Paradise",
                location: "Sainte-Anne",
                price: 950.0,
                guests: 8,
                guestsDetail: "8 personnes + 12 invités",
                features: "Piscine privée 8x4m, vue mer",
                category: "sejour",
                image: "./images/villa_sunset_paradise.jpg",
                gallery: ["./images/villa_sunset_paradise.jpg"],
                fallbackIcon: "🌅",
                amenities: ["Piscine privée", "Vue mer", "Cuisine équipée", "WiFi", "Climatisation", "Terrasse"],
                description: "Villa exceptionnelle avec vue imprenable sur le coucher de soleil et piscine privée."
            },
            {
                id: 6,
                name: "Villa Océan Bleu",
                location: "Les Trois-Îlets",
                price: 1200.0,
                guests: 10,
                guestsDetail: "10 personnes + 15 invités",
                features: "Accès direct plage, piscine à débordement",
                category: "sejour",
                image: "./images/villa_ocean_bleu.jpg",
                gallery: ["./images/villa_ocean_bleu.jpg"],
                fallbackIcon: "🌊",
                amenities: ["Accès plage", "Piscine à débordement", "Cuisine moderne", "WiFi", "Climatisation", "Jardin tropical"],
                description: "Villa de prestige avec accès direct à la plage et piscine à débordement face à la mer."
            },
            {
                id: 7,
                name: "Villa Tropicale Zen",
                location: "Sainte-Luce",
                price: 780.0,
                guests: 6,
                guestsDetail: "6 personnes + 8 invités",
                features: "Jardin tropical, spa extérieur",
                category: "sejour",
                image: "./images/villa_tropicale_zen.jpg",
                gallery: ["./images/villa_tropicale_zen.jpg"],
                fallbackIcon: "🌴",
                amenities: ["Jardin tropical", "Spa extérieur", "Piscine", "Cuisine équipée", "WiFi", "Climatisation"],
                description: "Havre de paix au cœur d'un jardin tropical luxuriant avec espace spa."
            },
            {
                id: 8,
                name: "Villa Carbet Deluxe",
                location: "Le Carbet",
                price: 1100.0,
                guests: 8,
                guestsDetail: "8 personnes + 12 invités",
                features: "Vue montagne Pelée, piscine chauffée",
                category: "sejour",
                image: "./images/villa_carbet_deluxe.jpg",
                gallery: ["./images/villa_carbet_deluxe.jpg"],
                fallbackIcon: "🏔️",
                amenities: ["Vue montagne", "Piscine chauffée", "Grande terrasse", "Cuisine moderne", "WiFi", "Climatisation"],
                description: "Villa de luxe avec vue spectaculaire sur la montagne Pelée et piscine chauffée."
            },
            {
                id: 9,
                name: "Appartement Marina Fort-de-France",
                location: "Fort-de-France Marina",
                price: 320.0,
                guests: 4,
                guestsDetail: "4 personnes max",
                features: "Vue marina, balcon panoramique",
                category: "special",
                image: "./images/appartement_marina_fdf.jpg",
                gallery: ["./images/appartement_marina_fdf.jpg"],
                fallbackIcon: "⛵",
                amenities: ["Vue marina", "Balcon", "Cuisine équipée", "WiFi", "Climatisation", "Parking"],
                description: "Appartement moderne avec vue imprenable sur la marina et les bateaux."
            },
            {
                id: 10,
                name: "Villa Diamant Prestige",
                location: "Le Diamant",
                price: 1400.0,
                guests: 12,
                guestsDetail: "12 personnes + 20 invités",
                features: "Vue Rocher du Diamant, piscine infinity",
                category: "fete",
                image: "./images/villa_diamant_prestige.jpg",
                gallery: ["./images/villa_diamant_prestige.jpg"],
                fallbackIcon: "💎",
                amenities: ["Vue Rocher du Diamant", "Piscine infinity", "Grande cuisine", "WiFi", "Climatisation", "Barbecue"],
                description: "Villa de prestige avec vue exceptionnelle sur le célèbre Rocher du Diamant."
            },
            {
                id: 11,
                name: "Villa Bord de Mer Tartane",
                location: "La Trinité - Tartane",
                price: 890.0,
                guests: 6,
                guestsDetail: "6 personnes + 10 invités",
                features: "Pieds dans l'eau, piscine naturelle",
                category: "sejour",
                image: "./images/villa_tartane.jpg",
                gallery: ["./images/villa_tartane.jpg"],
                fallbackIcon: "🏖️",
                amenities: ["Accès direct mer", "Piscine naturelle", "Cuisine créole", "WiFi", "Climatisation", "Kayaks"],
                description: "Villa authentique les pieds dans l'eau avec accès à une piscine naturelle."
            },
            {
                id: 12,
                name: "Studio Marin Cosy",
                location: "Le Marin",
                price: 280.0,
                guests: 2,
                guestsDetail: "2 personnes (couple)",
                features: "Port de plaisance, terrasse privée",
                category: "special",
                image: "./images/studio_marin_cosy.jpg",
                gallery: ["./images/studio_marin_cosy.jpg"],
                fallbackIcon: "⚓",
                amenities: ["Vue port", "Terrasse privée", "Kitchenette", "WiFi", "Climatisation"],
                description: "Studio douillet avec vue sur le port de plaisance du Marin."
            },
            {
                id: 13,
                name: "Villa Anses d'Arlet",
                location: "Les Anses d'Arlet",
                price: 1050.0,
                guests: 8,
                guestsDetail: "8 personnes + 12 invités",
                features: "Proche Grande Anse, piscine avec bar",
                category: "sejour",
                image: "./images/villa_anses_arlet.jpg",
                gallery: ["./images/villa_anses_arlet.jpg"],
                fallbackIcon: "🥥",
                amenities: ["Proche plage", "Piscine avec bar", "Cuisine tropicale", "WiFi", "Climatisation", "Hamacs"],
                description: "Villa caribéenne authentique à proximité de la magnifique Grande Anse."
            },
            {
                id: 14,
                name: "Penthouse Schoelcher Vue Mer",
                location: "Schoelcher",
                price: 620.0,
                guests: 6,
                guestsDetail: "6 personnes max",
                features: "Dernier étage, terrasse 360°",
                category: "special",
                image: "./images/penthouse_schoelcher.jpg",
                gallery: ["./images/penthouse_schoelcher.jpg"],
                fallbackIcon: "🏙️",
                amenities: ["Vue panoramique", "Terrasse 360°", "Cuisine moderne", "WiFi", "Climatisation", "Ascenseur"],
                description: "Penthouse moderne avec vue panoramique exceptionnelle sur la baie de Fort-de-France."
            },
            {
                id: 15,
                name: "Villa Rivière-Pilote Charme",
                location: "Rivière-Pilote",
                price: 720.0,
                guests: 6,
                guestsDetail: "6 personnes + 8 invités",
                features: "Architecture créole, jardin centenaire",
                category: "sejour",
                image: "./images/villa_riviere_pilote.jpg",
                gallery: ["./images/villa_riviere_pilote.jpg"],
                fallbackIcon: "🏛️",
                amenities: ["Architecture créole", "Jardin centenaire", "Piscine traditionnelle", "WiFi", "Climatisation"],
                description: "Villa de charme à l'architecture créole authentique dans un jardin centenaire."
            },
            {
                id: 16,
                name: "Villa François Moderne",
                location: "Le François",
                price: 980.0,
                guests: 8,
                guestsDetail: "8 personnes + 12 invités",
                features: "Fonds blancs, excursions incluses",
                category: "sejour",
                image: "./images/villa_francois_moderne.jpg",
                gallery: ["./images/villa_francois_moderne.jpg"],
                fallbackIcon: "🛥️",
                amenities: ["Accès fonds blancs", "Excursions incluses", "Piscine", "Cuisine équipée", "WiFi", "Climatisation"],
                description: "Villa moderne avec accès privilégié aux fameux fonds blancs du François."
            },
            {
                id: 17,
                name: "Studio Ducos Pratique",
                location: "Ducos Centre",
                price: 250.0,
                guests: 2,
                guestsDetail: "2 personnes max",
                features: "Centre-ville, tous commerces",
                category: "special",
                image: "./images/studio_ducos.jpg",
                gallery: ["./images/studio_ducos.jpg"],
                fallbackIcon: "🛍️",
                amenities: ["Centre-ville", "Commerces proches", "Kitchenette", "WiFi", "Climatisation"],
                description: "Studio pratique en centre-ville avec tous les commerces à proximité."
            },
            {
                id: 18,
                name: "Villa Sainte-Marie Familiale",
                location: "Sainte-Marie",
                price: 850.0,
                guests: 8,
                guestsDetail: "8 personnes + 10 invités",
                features: "Proche distillerie, piscine familiale",
                category: "sejour",
                image: "./images/villa_sainte_marie.jpg",
                gallery: ["./images/villa_sainte_marie.jpg"],
                fallbackIcon: "🥃",
                amenities: ["Proche distilleries", "Piscine familiale", "Grand jardin", "WiFi", "Climatisation", "Barbecue"],
                description: "Villa familiale idéalement située près des distilleries de rhum de Sainte-Marie."
            },
            {
                id: 19,
                name: "Villa Marigot Exclusive",
                location: "Le Marigot",
                price: 1180.0,
                guests: 10,
                guestsDetail: "10 personnes + 15 invités",
                features: "Plage privée, piscine olympique",
                category: "fete",
                image: "./images/villa_marigot_exclusive.jpg",
                gallery: ["./images/villa_marigot_exclusive.jpg"],
                fallbackIcon: "🏊‍♀️",
                amenities: ["Plage privée", "Piscine olympique", "Cuisine professionnelle", "WiFi", "Climatisation", "Staff inclus"],
                description: "Villa exclusive avec plage privée et piscine olympique, staff de service inclus."
            },
            {
                id: 20,
                name: "Bungalow Trenelle Nature",
                location: "Trenelle, Trinité",
                price: 420.0,
                guests: 4,
                guestsDetail: "4 personnes max",
                features: "Écotourisme, randonnées",
                category: "special",
                image: "./images/bungalow_trenelle.jpg",
                gallery: ["./images/bungalow_trenelle.jpg"],
                fallbackIcon: "🦋",
                amenities: ["Nature préservée", "Randonnées", "Petit bassin", "WiFi", "Ventilation naturelle"],
                description: "Bungalow écologique en pleine nature pour les amateurs d'écotourisme."
            },
            {
                id: 21,
                name: "Villa Grand Luxe Pointe du Bout",
                location: "Pointe du Bout, Trois-Îlets",
                price: 1800.0,
                guests: 14,
                guestsDetail: "14 personnes + 25 invités",
                features: "Villa de prestige, service conciergerie",
                category: "fete",
                image: "./images/villa_grand_luxe_pointe.jpg",
                gallery: ["./images/villa_grand_luxe_pointe.jpg"],
                fallbackIcon: "👑",
                amenities: ["Service conciergerie", "Piscine à débordement", "Cuisine chef", "WiFi", "Climatisation", "Spa privé"],
                description: "Villa de grand luxe avec service conciergerie et toutes les prestations haut de gamme."
            },
            {
                id: 22,
                name: "Villa F6 Petit Macabou",
                location: "Petit Macabou au Vauclin",
                price: 2000.0,
                guests: 13,
                guestsDetail: "10 à 13 personnes (14 max)",
                features: "3 chambres climatisées, 1 mezzanine, 2 studios aux extrémités",
                category: "fete",
                image: "./images/Villa_F6_Petit_Macabou/02_salle_de_bain.jpg",
                gallery: [
                    "./images/Villa_F6_Petit_Macabou/02_salle_de_bain.jpg",
                    "./images/Villa_F6_Petit_Macabou/03_chambre_studio.jpg",
                    "./images/Villa_F6_Petit_Macabou/04_salon_mezzanine.jpg",
                    "./images/Villa_F6_Petit_Macabou/05_cuisine_moderne.jpg",
                    "./images/Villa_F6_Petit_Macabou/06_terrasse_couverte.jpg",
                    "./images/Villa_F6_Petit_Macabou/07_terrasse_piscine.jpg",
                    "./images/Villa_F6_Petit_Macabou/10_vue_aerienne_jour.jpg"
                ],
                fallbackIcon: "🎊",
                amenities: [
                    {name: "3 chambres climatisées", icon: "🛏️"},
                    {name: "Mezzanine", icon: "🏠"},
                    {name: "2 studios indépendants", icon: "🏡"},
                    {name: "Piscine XXL", icon: "🏊"},
                    {name: "Terrasse couverte", icon: "🏖️"},
                    {name: "WiFi haut débit", icon: "📶"},
                    {name: "Climatisation", icon: "❄️"},
                    {name: "Cuisine moderne", icon: "🍳"},
                    {name: "Fêtes autorisées", icon: "🎉"},
                    {name: "Jusqu'à 150 convives", icon: "👥"}
                ],
                description: "La Villa F6 Petit Macabou représente l'excellence de l'hébergement événementiel en Martinique. Cette propriété d'exception, située dans le prestigieux secteur de Petit Macabou au Vauclin, a été spécialement conçue pour accueillir vos plus belles célébrations. Elle se compose d'un bâtiment principal avec 3 chambres climatisées, chacune dotée de sa salle d'eau attenante, d'une mezzanine offrant un espace de vie supplémentaire, et de 2 studios indépendants aux extrémités pour une intimité parfaite. La piscine XXL et ses terrasses aménagées peuvent transformer vos événements privés en moments inoubliables. Les fêtes sont autorisées de 9h à 19h avec une capacité maximale de 30 convives pour les séjours résidentiels, et jusqu'à 150 personnes pour les événements ponctuels. En option, 3 bungalows supplémentaires avec salles de bain peuvent être loués sur le même terrain. Cette villa premium allie confort moderne, espaces généreux et cadre tropical exceptionnel."
            }
        ];

        // Global variables
        let currentVilla = null;
        let currentModalImageIndex = 0;
        let modalImages = [];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadVillaDetails();
        });

        function loadVillaDetails() {
            // Get villa ID from URL parameters or localStorage
            const urlParams = new URLSearchParams(window.location.search);
            const villaId = urlParams.get('id') || localStorage.getItem('selectedVillaId');
            
            if (!villaId) {
                showErrorState();
                return;
            }

            // Find villa in data
            currentVilla = villasData.find(villa => villa.id == villaId);
            
            if (!currentVilla) {
                showErrorState();
                return;
            }

            // Display villa details
            setTimeout(() => {
                displayVillaDetails(currentVilla);
                document.getElementById('loading').style.display = 'none';
                document.getElementById('villa-details').style.display = 'block';
            }, 800);
        }

        function displayVillaDetails(villa) {
            // Update page title
            document.title = `${villa.name} - KhanelConcept`;
            document.getElementById('villa-title').textContent = `${villa.name} - KhanelConcept`;

            // Update villa header
            document.getElementById('villa-name').textContent = villa.name;
            document.getElementById('villa-location').querySelector('span').textContent = villa.location;
            document.getElementById('villa-price').innerHTML = `${villa.price}€ <small>/nuit</small>`;
            document.getElementById('villa-guests-detail').textContent = villa.guestsDetail;

            // Update description
            document.getElementById('villa-description').textContent = villa.description;
            document.getElementById('villa-features').innerHTML = `<p><strong>Caractéristiques:</strong> ${villa.features}</p>`;

            // Update amenities
            const amenitiesList = document.getElementById('villa-amenities');
            amenitiesList.innerHTML = villa.amenities.map(amenity => 
                `<li><i class="fas fa-check"></i> ${amenity}</li>`
            ).join('');

            // Load gallery
            loadGallery(villa.gallery, villa.fallbackIcon);

            // Load catalogue images
            loadCatalogueImages(villa);

            // Update reservation button
            document.getElementById('btn-reserve').onclick = function() {
                // Navigate to reservation page with villa ID
                window.location.href = `reservation.html?villa=${villa.id}`;
            };
        }

        function loadGallery(gallery, fallbackIcon) {
            const galleryGrid = document.getElementById('gallery-grid');
            modalImages = [...gallery];
            
            galleryGrid.innerHTML = gallery.map((image, index) => `
                <div class="gallery-item" onclick="openGalleryModal(${index})">
                    <img src="${image}" 
                         alt="Photo ${index + 1}" 
                         onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="gallery-fallback" style="display: none;">
                        ${fallbackIcon}
                    </div>
                </div>
            `).join('');
        }

        function loadCatalogueImages(villa) {
            // Generate possible folder name based on villa name
            const folderName = getFolderNameForVilla(villa.name);
            
            // List of possible catalogue image patterns based on actual folder content
            const possibleCatalogueImages = [
                `./images/${folderName}/09_informations_catalogue.jpg`,
                `./images/${folderName}/10_informations_catalogue.jpg`,
                `./images/${folderName}/11_informations_catalogue.jpg`,
                `./images/${folderName}/informations_catalogue.jpg`,
                `./images/${folderName}/tarifs_conditions.jpg`,
                `./images/${folderName}/tarifs_conditions_${villa.name.toLowerCase().replace(/\s+/g, '_')}.jpg`,
                `./images/${folderName}/description_${villa.name.toLowerCase().replace(/\s+/g, '_')}.jpg`,
                `./images/${folderName}/description_villa_${villa.name.toLowerCase().replace(/\s+/g, '_')}.jpg`,
                `./images/${folderName}/08_informations_tarifs.jpg`,
                `./images/${folderName}/07_informations_tarifs.jpg`,
                `./images/${folderName}/04_informations_tarifs.jpg`,
                `./images/${folderName}/02_informations_forfaits_tarifs.jpg`
            ];

            const catalogueGrid = document.getElementById('catalogue-grid');
            let catalogueHTML = '';
            let loadedCount = 0;
            let totalImages = possibleCatalogueImages.length;

            // Test each possible image
            possibleCatalogueImages.forEach((imagePath, index) => {
                catalogueHTML += `
                    <div class="catalogue-item" style="display: none;" onclick="openCatalogueImage('${imagePath}')">
                        <img src="${imagePath}" 
                             alt="Informations ${index + 1}" 
                             onload="catalogueImageLoaded(this);"
                             onerror="catalogueImageFailed(this);"
                             style="width: 100%; height: auto;">
                    </div>
                `;
            });

            catalogueGrid.innerHTML = catalogueHTML;

            // Start loading check
            catalogueImagesCheck = setTimeout(() => {
                const visibleCatalogueItems = catalogueGrid.querySelectorAll('.catalogue-item[style*="display: block"]');
                if (visibleCatalogueItems.length === 0) {
                    document.getElementById('catalogue-section').style.display = 'none';
                }
            }, 3000);
        }

        function getFolderNameForVilla(villaName) {
            // Map villa names to their actual folder names
            const nameToFolderMap = {
                "Villa F3 Petit Macabou": "Villa_F3_Petit_Macabou",
                "Villa F5 Ste Anne": "Villa_F5_Ste_Anne",
                "Villa F3 POUR LA BACCHA": "Villa_F3_Baccha_Petit_Macabou",
                "Studio Cocooning Lamentin": "Studio_Cocooning_Lamentin",
                "Villa F6 Petit Macabou": "Villa_F6_Petit_Macabou",
                "Villa F7 Baie des Mulets": "Villa_F7_Baie_des_Mulets_Vauclin",
                "Villa F3 Trinité (Cosmy)": "Villa_F3_Trinite_Cosmy",
                "Villa F3 Le Robert": "Villa_F3_Robert_Pointe_Hyacinthe",
                "Villa F5 R.Pilote": "Villa_F5_R_Pilote_La_Renee",
                "Villa F3 Le François": "Villa_F3_Le_Francois",
                "Villa F5 Vauclin Ravine Plate": "Villa_F5_Vauclin_Ravine_Plate",
                "Bas Villa F3 Ste Luce": "Bas_Villa_F3_Ste_Luce",
                "Villa F3 Trenelle": "Villa_F3_Trenelle_Location_Annuelle",
                "Villa F6 Lamentin": "Villa_F6_Lamentin",
                "Villa F6 Ste Luce Plage": "Villa_F6_Ste_Luce_Plage",
                "Espace Piscine Journée Bungalow": "Espace_Piscine_Journee_Bungalow",
                "Villa Fête Journée Ducos": "Villa_Fete_Journee_Ducos",
                "Villa Fête Journée Fort-de-France": "Villa_Fete_Journee_Fort_de_France",
                "Villa Fête Journée R.Pilote": "Villa_Fete_Journee_R_Pilote",
                "Villa Fête Journée Sainte-Luce": "Villa_Fete_Journee_Sainte_Luce",
                "Villa Fête Journée Rivière-Salée": "Villa_Fete_Journee_Riviere_Salee"
            };

            return nameToFolderMap[villaName] || villaName.replace(/\s+/g, '_').replace(/[àáâãäå]/g, 'a').replace(/[èéêë]/g, 'e').replace(/[ìíîï]/g, 'i').replace(/[òóôõö]/g, 'o').replace(/[ùúûü]/g, 'u');
        }

        let catalogueImagesCheck;

        function catalogueImageLoaded(imgElement) {
            // This function is called when a catalogue image loads successfully
            imgElement.parentElement.style.display = 'block';
            document.getElementById('catalogue-section').style.display = 'block';
            
            // Clear timeout if at least one image loaded
            if (catalogueImagesCheck) {
                clearTimeout(catalogueImagesCheck);
            }
        }

        function catalogueImageFailed(imgElement) {
            // Keep the item hidden if image fails to load
            imgElement.parentElement.style.display = 'none';
        }

        function openCatalogueImage(imagePath) {
            // Open catalogue image in modal
            modalImages = [imagePath];
            currentModalImageIndex = 0;
            openGalleryModal(0);
        }

        function showErrorState() {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('error-state').style.display = 'block';
        }

        // Gallery Modal Functions
        function openGalleryModal(imageIndex) {
            currentModalImageIndex = imageIndex;
            document.getElementById('modal-image').src = modalImages[imageIndex];
            document.getElementById('gallery-modal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeGalleryModal() {
            document.getElementById('gallery-modal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function nextModalImage() {
            currentModalImageIndex = (currentModalImageIndex + 1) % modalImages.length;
            document.getElementById('modal-image').src = modalImages[currentModalImageIndex];
        }

        function previousModalImage() {
            currentModalImageIndex = (currentModalImageIndex - 1 + modalImages.length) % modalImages.length;
            document.getElementById('modal-image').src = modalImages[currentModalImageIndex];
        }

        // Close modal on escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeGalleryModal();
            }
            if (event.key === 'ArrowLeft') {
                previousModalImage();
            }
            if (event.key === 'ArrowRight') {
                nextModalImage();
            }
        });

        // Close modal when clicking outside
        document.getElementById('gallery-modal').addEventListener('click', function(event) {
            if (event.target === this) {
                closeGalleryModal();
            }
        });
    </script>
</body>
</html>