<!DOCTYPE html><html lang="fr"> \1 <!-- SEO Meta Tags Optimisées --><meta name="description" content="Découvrez nos villas de luxe en Martinique avec KhanelConcept. Réservation en ligne sécurisée, galeries HD, calendriers en temps réel. Villas avec piscine, vue mer, climatisation. Séjours d'exception aux Antilles."><meta name="keywords" content="villa martinique, location villa luxe, martinique vacances, villa piscine, séjour martinique, villa de rêve"><meta name="author" content="KhanelConcept"><meta name="robots" content="index, follow"><meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- Favicon et Icons --><link rel="icon" type="image/x-icon" href="https://0bc94448-66d9-4bda-95fc-b769dc763bd7.preview.emergentagent.com'; } // Enhanced search function with cache and analytics window.searchVillas = async function(destination, guests, category) { // Track search event if (window.gdprConsent && window.gdprConsent.hasConsent('analytics')) { trackEvent('villa_search', { destination: destination, guests: guests, category: category }); } try { // Use cached API client const response = await window.ApiClient.post('/api/villas/search', { destination: destination, guests: guests, category: category }, { cache: 'user' }); // Display results displayVillas(response.villas); // Update search status const statusElement = document.getElementById('search-status'); if (statusElement) { statusElement.textContent = `${response.villas.length} villa(s) trouvée(s) !`; } } catch (error) { console.error('Search failed:', error); // Show error message const statusElement = document.getElementById('search-status'); if (statusElement) { statusElement.textContent = 'Erreur lors de la recherche'; } } }; // GDPR consent event listeners window.addEventListener('gdpr:acceptedAll', function() { console.log('✅ GDPR: All consent given'); // Initialize analytics tracking trackPageView('index'); }); window.addEventListener('gdpr:rejectedAll', function() { console.log('❌ GDPR: All consent rejected'); // Disable analytics features if (window.CacheSystem) { window.CacheSystem.configure({ enablePersistence: false }); } }); window.addEventListener('gdpr:categoryToggled', function(event) { console.log('🔄 GDPR: Category toggled', event.detail); if (event.detail.category === 'analytics' && event.detail.enabled) { trackPageView('index'); } }); // Performance monitoring window.addEventListener('load', function() { // Track page load time const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart; if (window.gdprConsent && window.gdprConsent.hasConsent('analytics')) { trackEvent('page_load_time', { load_time: loadTime, page: 'index' }); } // Cache performance metrics setTimeout(() => { if (window.CacheSystem) { const stats = window.CacheSystem.getStats(); console.log('📊 Cache Performance:', stats); } }, 1000); }); </script><script src="https://cdn.jsdelivr.net/gh/khanelconcept/assets@main/js/universal-button-fixer.js"></script></body></html>