<!DOCTYPE html>
<html lang="fr">
\1
    <!-- SEO Meta Tags Optimis√©es -->
    <meta name="description" content="D√©couvrez nos villas de luxe en Martinique avec KhanelConcept. R√©servation en ligne s√©curis√©e, galeries HD, calendriers en temps r√©el. Villas avec piscine, vue mer, climatisation. S√©jours d'exception aux Antilles.">
    <meta name="keywords" content="villa martinique, location villa luxe, martinique vacances, villa piscine, s√©jour martinique, villa de r√™ve">
    <meta name="author" content="KhanelConcept">
    <meta name="robots" content="index, follow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Favicon et Icons -->
    <link rel="icon" type="image/x-icon" href="https://res.cloudinary.com/khanelconcept/image/upload/v1/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="https://res.cloudinary.com/khanelconcept/image/upload/v1/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://res.cloudinary.com/khanelconcept/image/upload/c_scale,w_32/v1/favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://res.cloudinary.com/khanelconcept/image/upload/c_scale,w_16/v1/favicon.png">
    
    <!-- OpenGraph pour R√©seaux Sociaux -->
    <meta property="og:title" content="KhanelConcept - Exemple d'int√©gration Jamstack">
    <meta property="og:description" content="D√©couvrez nos villas de luxe en Martinique avec KhanelConcept. R√©servation en ligne s√©curis√©e, galeries HD, calendriers en temps r√©el. Villas avec piscine, vue mer, climatisation. S√©jours d'exception aux Antilles.">
    <meta property="og:image" content="https://res.cloudinary.com/khanelconcept/image/upload/v1/og-image.jpg">
    <meta property="og:url" content="https://khanelconcept.com/index-example.html">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="KhanelConcept">
    <meta property="og:locale" content="fr_FR">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="KhanelConcept - Exemple d'int√©gration Jamstack">
    <meta name="twitter:description" content="D√©couvrez nos villas de luxe en Martinique avec KhanelConcept. R√©servation en ligne s√©curis√©e, galeries HD, calendriers en temps r√©el. Villas avec piscine, vue mer, climatisation. S√©jours d'exception aux Antilles.">
    <meta name="twitter:image" content="https://res.cloudinary.com/khanelconcept/image/upload/v1/og-image.jpg">
    
    <!-- Schema.org JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LodgingBusiness",
        "name": "KhanelConcept",
        "description": "D√©couvrez nos villas de luxe en Martinique avec KhanelConcept. R√©servation en ligne s√©curis√©e, galeries HD, calendriers en temps r√©el. Villas avec piscine, vue mer, climatisation. S√©jours d'exception aux Antilles.",
        "url": "https://khanelconcept.com/index-example.html",
        "logo": "https://res.cloudinary.com/khanelconcept/image/upload/v1/apple-touch-icon.png",
        "image": "https://res.cloudinary.com/khanelconcept/image/upload/v1/og-image.jpg",
        "address": {
            "@type": "PostalAddress",
            "addressCountry": "MQ",
            "addressRegion": "Martinique"
        },
        "priceRange": "‚Ç¨‚Ç¨‚Ç¨",
        "amenityFeature": [
            { "@type": "LocationFeatureSpecification", "name": "Piscine" },
            { "@type": "LocationFeatureSpecification", "name": "WiFi gratuit" },
            { "@type": "LocationFeatureSpecification", "name": "Climatisation" },
            { "@type": "LocationFeatureSpecification", "name": "Vue mer" }
        ]
    }
    </script>
    
    <!-- Performance et S√©curit√© -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="theme-color" content="#667eea">
    <meta name="msapplication-TileColor" content="#667eea">
    <link rel="canonical" href="https://khanelconcept.com/index-example.html">
                
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KhanelConcept - Exemple d'int√©gration Jamstack</title>
    
    <!-- CSS minimal pour exemple -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        button {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }
        
        button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .status {
            background: rgba(0, 255, 0, 0.1);
            color: #00ff00;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-family: monospace;
        }
        
        .error {
            background: rgba(255, 0, 0, 0.1);
            color: #ff6b6b;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card h3 {
            color: white;
            margin-bottom: 10px;
            font-size: 1.3em;
        }
        
        .card p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            margin-bottom: 8px;
        }
        
        .price {
            font-size: 1.5em;
            font-weight: bold;
            color: #ffd700;
            margin-top: 10px;
        }
        
        .category {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            display: inline-block;
            margin-top: 10px;
        }
        
        .loading {
            text-align: center;
            color: white;
            font-size: 1.2em;
            padding: 40px;
        }
        
        .config-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            color: white;
            font-family: monospace;
            font-size: 0.9em;
        }
        
        .filter-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .filter-section h3 {
            color: white;
            margin-bottom: 15px;
        }
        
        .filter-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .filter-group label {
            color: white;
            font-weight: 500;
        }
        
        .filter-group input, .filter-group select {
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            backdrop-filter: blur(5px);
        }
        
        .filter-group input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .filter-group select option {
            background: #333;
            color: white;
        }
        
        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
            }
            
            .filter-group {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .filter-group input, .filter-group select {
                width: 100%;
            }
        }
    </style>
    <link rel=\n    <div class="video-background">
  <video autoplay loop muted playsinline poster="images/hero-poster.jpg">
    <source src="https://res.cloudinary.com/ddulasmtz/video/upload/v1752950782/background-video.webm" type="video/webm">
    Votre navigateur ne supporte pas la vid√©o HTML5.
  </video>
  <div class="video-overlay"></div>
</div>\n"stylesheet" href="assets/css/video-background.css">\n</head>
<body>
    <div class="container">
        <h1>üèñÔ∏è KhanelConcept - Pr√©-backend Jamstack</h1>
        
        <!-- Configuration Info -->
        <div class="config-info">
            <strong>üìä Configuration API:</strong>
            <div id="config-display">Chargement...</div>
        </div>
        
        <!-- Status -->
        <div id="status" class="status">
            ‚è≥ Pr√™t - Cliquez sur un bouton pour tester l'API
        </div>
        
        <!-- Filtres pour villas -->
        <div class="filter-section">
            <h3>üîç Filtres Villas</h3>
            <div class="filter-group">
                <label for="category-filter">Cat√©gorie:</label>
                <select id="category-filter">
                    <option value="">Toutes</option>
                    <option value="sejour">S√©jour</option>
                    <option value="fete">F√™te</option>
                    <option value="speciale">Sp√©ciale</option>
                </select>
                
                <label for="location-filter">Localisation:</label>
                <input type="text" id="location-filter" placeholder="Ex: Vauclin, Lamentin...">
                
                <label for="guests-filter">Invit√©s min:</label>
                <input type="number" id="guests-filter" min="1" placeholder="6">
                
                <label for="price-max">Prix max:</label>
                <input type="number" id="price-max" min="0" placeholder="1500">
            </div>
        </div>
        
        <!-- Contr√¥les -->
        <div class="controls">
            <button onclick="loadVillas()">üèñÔ∏è Charger Villas</button>
            <button onclick="loadPrestataires()">ü§ù Charger Prestataires</button>
            <button onclick="loadEvents()">üéâ Charger √âv√©nements</button>
            <button onclick="loadStats()">üìä Statistiques</button>
            <button onclick="checkHealth()">üè• Sant√© API</button>
            <button onclick="clearCache()">üóëÔ∏è Vider Cache</button>
        </div>
        
        <!-- R√©sultats -->
        <div id="results"></div>
    </div>

    <!-- Module fetchData.js -->
    <script type="module">
        import {
            getVillas,
            getVillaById,
            getPrestataires,
            getEvents,
            getHealth,
            getStats,
            clearCache as clearApiCache,
            getApiConfig
        } from './fetchData.js';
        
        // Variables globales
        let currentData = [];
        
        // Affichage de la configuration
        function updateConfigDisplay() {
            const config = getApiConfig();
            document.getElementById('config-display').innerHTML = `
                <div>üåç Environnement: <strong>${config.current}</strong></div>
                <div>üîó Base URL: <strong>${config.current === 'development' ? config.development : config.production}</strong></div>
                <div>üíæ Cache: ${config.cacheSize} √©l√©ments (${config.cacheDuration/1000/60}min TTL)</div>
            `;
        }
        
        // Fonction utilitaire pour afficher le statut
        function showStatus(message, isError = false) {
            const statusEl = document.getElementById('status');
            statusEl.textContent = message;
            statusEl.className = isError ? 'status error' : 'status';
        }
        
        // Fonction utilitaire pour afficher les r√©sultats
        function displayResults(data, title) {
            const resultsEl = document.getElementById('results');
            
            if (!data || data.length === 0) {
                resultsEl.innerHTML = `<div class="loading">Aucune donn√©e trouv√©e pour ${title}</div>`;
                return;
            }
            
            let html = `<h2 style="color: white; margin-bottom: 20px;">${title} (${data.length} r√©sultats)</h2>`;
            
            if (Array.isArray(data)) {
                html += '<div class="grid">';
                data.forEach(item => {
                    html += createCard(item);
                });
                html += '</div>';
            } else {
                html += `<div class="card"><pre style="color: white; white-space: pre-wrap;">${JSON.stringify(data, null, 2)}</pre></div>`;
            }
            
            resultsEl.innerHTML = html;
        }
        
        // Cr√©er une carte pour un √©l√©ment
        function createCard(item) {
            if (item.name && item.price) {
                // Villa
                return `
                    <div class="card">
                        <h3>${item.name}</h3>
                        <p><strong>üìç Localisation:</strong> ${item.location}</p>
                        <p><strong>üë• Invit√©s:</strong> ${item.guests_detail || item.guests}</p>
                        <p><strong>‚ú® Caract√©ristiques:</strong> ${item.features}</p>
                        <div class="price">${item.price}‚Ç¨</div>
                        <div class="category">${item.category}</div>
                    </div>
                `;
            } else if (item.title && item.date) {
                // √âv√©nement
                return `
                    <div class="card">
                        <h3>${item.title}</h3>
                        <p><strong>üìÖ Date:</strong> ${item.date} √† ${item.time}</p>
                        <p><strong>üìç Lieu:</strong> ${item.location}</p>
                        <p>${item.description}</p>
                        <div class="price">${item.price}‚Ç¨</div>
                        <div class="category">${item.category}</div>
                        <p style="margin-top: 10px;"><strong>Places disponibles:</strong> ${item.available}/${item.capacity}</p>
                    </div>
                `;
            } else if (item.category && item.phone) {
                // Prestataire
                return `
                    <div class="card">
                        <h3>${item.name}</h3>
                        <p><strong>üìç Localisation:</strong> ${item.location}</p>
                        <p><strong>üìû T√©l√©phone:</strong> ${item.phone}</p>
                        <p><strong>‚úâÔ∏è Email:</strong> ${item.email}</p>
                        <p>${item.description}</p>
                        <div class="price">${item.price_range}</div>
                        <div class="category">${item.category}</div>
                        <p style="margin-top: 10px;"><strong>Note:</strong> ‚≠ê ${item.rating}/5 ${item.verified ? '‚úÖ V√©rifi√©' : ''}</p>
                    </div>
                `;
            } else {
                // G√©n√©rique
                return `
                    <div class="card">
                        <h3>${item.name || item.title || '√âl√©ment'}</h3>
                        <pre style="color: rgba(255,255,255,0.8); font-size: 0.9em;">${JSON.stringify(item, null, 2)}</pre>
                    </div>
                `;
            }
        }
        
        // Fonctions expos√©es globalement
        window.loadVillas = async function() {
            try {
                showStatus('üîÑ Chargement des villas...');
                
                // R√©cup√©ration des filtres
                const filters = {};
                const category = document.getElementById('category-filter').value;
                const location = document.getElementById('location-filter').value;
                const guests = document.getElementById('guests-filter').value;
                const maxPrice = document.getElementById('price-max').value;
                
                if (category) filters.category = category;
                if (location) filters.location = location;
                if (guests) filters.guests = parseInt(guests);
                if (maxPrice) filters.max_price = parseFloat(maxPrice);
                
                const villas = await getVillas(filters);
                currentData = villas;
                
                showStatus(`‚úÖ ${villas.length} villas charg√©es avec succ√®s`);
                displayResults(villas, 'üèñÔ∏è Villas');
                
            } catch (error) {
                showStatus(`‚ùå Erreur lors du chargement des villas: ${error.message}`, true);
                console.error('Erreur villas:', error);
            }
        };
        
        window.loadPrestataires = async function() {
            try {
                showStatus('üîÑ Chargement des prestataires...');
                
                const prestataires = await getPrestataires();
                currentData = prestataires;
                
                showStatus(`‚úÖ ${prestataires.length} prestataires charg√©s avec succ√®s`);
                displayResults(prestataires, 'ü§ù Prestataires');
                
            } catch (error) {
                showStatus(`‚ùå Erreur lors du chargement des prestataires: ${error.message}`, true);
                console.error('Erreur prestataires:', error);
            }
        };
        
        window.loadEvents = async function() {
            try {
                showStatus('üîÑ Chargement des √©v√©nements...');
                
                const events = await getEvents({ available: true });
                currentData = events;
                
                showStatus(`‚úÖ ${events.length} √©v√©nements charg√©s avec succ√®s`);
                displayResults(events, 'üéâ √âv√©nements');
                
            } catch (error) {
                showStatus(`‚ùå Erreur lors du chargement des √©v√©nements: ${error.message}`, true);
                console.error('Erreur √©v√©nements:', error);
            }
        };
        
        window.loadStats = async function() {
            try {
                showStatus('üîÑ Chargement des statistiques...');
                
                const stats = await getStats();
                
                showStatus('‚úÖ Statistiques charg√©es avec succ√®s');
                displayResults(stats, 'üìä Statistiques');
                
            } catch (error) {
                showStatus(`‚ùå Erreur lors du chargement des statistiques: ${error.message}`, true);
                console.error('Erreur statistiques:', error);
            }
        };
        
        window.checkHealth = async function() {
            try {
                showStatus('üîÑ V√©rification de la sant√© de l\'API...');
                
                const health = await getHealth();
                
                showStatus('‚úÖ API en bonne sant√©');
                displayResults(health, 'üè• Sant√© API');
                
            } catch (error) {
                showStatus(`‚ùå Erreur lors de la v√©rification: ${error.message}`, true);
                console.error('Erreur sant√©:', error);
            }
        };
        
        window.clearCache = function() {
            clearApiCache();
            showStatus('üóëÔ∏è Cache vid√© avec succ√®s');
            updateConfigDisplay();
        };
        
        // Initialisation
        updateConfigDisplay();
        
        // Mise √† jour p√©riodique de la config
        setInterval(updateConfigDisplay, 5000);
        
        console.log('‚úÖ Interface de test Jamstack initialis√©e');
    </script>
</body>
</html>