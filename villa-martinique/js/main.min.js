
// PROTECTION IMAGES/VIDÃ‰OS - NE PAS SUPPRIMER
function protectMediaElements() {
    const mediaElements = document.querySelectorAll('img, video');
    mediaElements.forEach(element => {
        element.setAttribute('data-protected', 'true');
    });
}

// ProtÃ©ger avant toute modification DOM
if (typeof MutationObserver !== 'undefined') {
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.type === 'childList') {
                // VÃ©rifier que les Ã©lÃ©ments mÃ©dia ne sont pas supprimÃ©s
                mutation.removedNodes.forEach(function(node) {
                    if (node.nodeType === 1 && (node.tagName === 'IMG' || node.tagName === 'VIDEO')) {
                        console.warn('âš ï¸ Tentative de suppression d\'Ã©lÃ©ment mÃ©dia dÃ©tectÃ©e:', node);
                    }
                });
            }
        });
    });
    
    observer.observe(document.body, {
        childList: true,
        subtree: true
    });
}


const villasData=[{id: "1",name: "Villa F3 Petit Macabou",location: "Petit Macabou au Vauclin",price: 850.0,guests: 6,guests_detail: "6 personnes(8 max)",features: "Vue mer panoramique,terrasses multiples,jardin tropical",category: "sejour",image: "../images/Villa_F3_Petit_Macabou/villa_f3_petit_macabou.jpg",gallery: [ "../images/Villa_F3_Petit_Macabou/villa_f3_petit_macabou.jpg","../images/Villa_F3_Petit_Macabou/terrasse_vue_mer.jpg","../images/Villa_F3_Petit_Macabou/jardin_tropical.jpg" ],fallback_icon: "ðŸ–ï¸",amenities: ["Piscine","Vue mer","Jardin tropical","WiFi","Climatisation","Terrasses multiples"],description: "Villa F3 avec vue mer exceptionnelle Ã  Petit Macabou. Terrasses multiples pour profiter des couchers de soleil martiniquais. Jardin tropical privÃ© et piscine avec vue panoramique."},{id: "2",name: "Villa F5 Ste Anne",location: "Sainte-Anne",price: 1200.0,guests: 10,guests_detail: "8 Ã  10 personnes",features: "Piscine privÃ©e,5 chambres climatisÃ©es,proche plages",category: "sejour",image: "../images/Villa_F5_Ste_Anne/villa_f5_ste_anne.jpg",gallery: [ "../images/Villa_F5_Ste_Anne/villa_f5_ste_anne.jpg","../images/Villa_F5_Ste_Anne/piscine_privee.jpg","../images/Villa_F5_Ste_Anne/chambre_principale.jpg" ],fallback_icon: "ðŸŒº",amenities: ["Piscine privÃ©e","5 chambres","Climatisation","WiFi","Proche plages","Cuisine Ã©quipÃ©e"],description: "Magnifique villa F5 Ã  Sainte-Anne,proche des plus belles plages de Martinique. 5 chambres climatisÃ©es,piscine privÃ©e et grand espace de vie pour des vacances inoubliables en famille."},{id: "3",name: "Villa F3 Baccha Petit Macabou",location: "Petit Macabou au Vauclin",price: 750.0,guests: 6,guests_detail: "4 Ã  6 personnes",features: "Villa moderne,terrasse couverte,proximitÃ© mer",category: "sejour",image: "../images/Villa_F3_Baccha_Petit_Macabou/villa_baccha.jpg",gallery: [ "../images/Villa_F3_Baccha_Petit_Macabou/villa_baccha.jpg","../images/Villa_F3_Baccha_Petit_Macabou/terrasse_couverte.jpg","../images/Villa_F3_Baccha_Petit_Macabou/salon_moderne.jpg" ],fallback_icon: "ðŸŒŠ",amenities: ["Terrasse couverte","Design moderne","ProximitÃ© mer","WiFi","Climatisation","Cuisine Ã©quipÃ©e"],description: "Villa F3 moderne Baccha situÃ©e Ã  Petit Macabou. Architecture contemporaine avec terrasse couverte et vue sur la mer des CaraÃ¯bes. IdÃ©ale pour un sÃ©jour relaxant."},{id: "22",name: "Villa F6 Petit Macabou",location: "Petit Macabou au Vauclin",price: 2000.0,guests: 13,guests_detail: "10 Ã  13 personnes(14 max)",features: "3 chambres climatisÃ©es,1 mezzanine,2 studios aux extrÃ©mitÃ©s",category: "fete",image: "../images/Villa_F6_Petit_Macabou/02_salle_de_bain.jpg",gallery: [ "../images/Villa_F6_Petit_Macabou/02_salle_de_bain.jpg","../images/Villa_F6_Petit_Macabou/03_chambre_studio.jpg","../images/Villa_F6_Petit_Macabou/04_salon_mezzanine.jpg","../images/Villa_F6_Petit_Macabou/05_cuisine_moderne.jpg","../images/Villa_F6_Petit_Macabou/06_terrasse_couverte.jpg","../images/Villa_F6_Petit_Macabou/07_terrasse_piscine.jpg","../images/Villa_F6_Petit_Macabou/10_vue_aerienne_jour.jpg" ],fallback_icon: "ðŸŽŠ",amenities: ["3 chambres climatisÃ©es","1 mezzanine","2 studios aux extrÃ©mitÃ©s","Piscine","Terrasse couverte","WiFi","Climatisation","Cuisine moderne"],description: "Villa F6 exceptionnelle Ã  Petit Macabou avec 3 chambres climatisÃ©es avec salle d'eau attenante,1 mezzanine et 2 studios aux extrÃ©mitÃ©s. FÃªte autorisÃ©e de 09h Ã  19h,30 convives max. PossibilitÃ© de louer en supplÃ©ment les 3 bungalows avec SDB Ã  5 punch chacun situÃ©s sur le mÃªme terrain. Piscine et fÃªtes jusqu'Ã  150 convives."}];const communesMartinique=[ 'Sainte-Anne','Vauclin','Lamentin','Macabou','Petit Macabou','Sainte-Luce','TrinitÃ©','Le Robert','RiviÃ¨re-Pilote','Ducos','Fort-de-France','Trenelle','Le Marin','RiviÃ¨re-SalÃ©e','Les Trois-ÃŽlets','Le Diamant','Les Anses-d\'Arlet','Le Carbet','Bellefontaine','Case-Pilote','Schoelcher','Saint-Joseph','Le Lorrain','Marigot','Sainte-Marie','Le PrÃªcheur','Grand\'RiviÃ¨re','L\'Ajoupa-Bouillon','Basse-Pointe','Macouba','Le Morne-Rouge','Saint-Pierre','Le Morne-Vert','Fonds-Saint-Denis' ];let currentPage='';let filteredVillas=[...villasData];let currentSearch={destination: '',checkin: '',checkout: '',adults: 2,children: 0,babies: 0};function initNavigation(){const path=window.location.pathname;currentPage=path.substring(path.lastIndexOf('/')+1);if(!currentPage)currentPage='index.html';const navLinks=document.querySelectorAll('.nav-links a');navLinks.forEach(link=>{const href=link.getAttribute('href');if(href===currentPage ||(currentPage==='index.html' && href==='index.html')){link.classList.add('active');}});const mobileToggle=document.querySelector('.mobile-menu-toggle');const navLinks2=document.querySelector('.nav-links');if(mobileToggle){mobileToggle.addEventListener('click',()=>{navLinks2.classList.toggle('mobile-open');});}console.log(`ðŸ“„ Page courante: ${currentPage}`);}function showStatusMessage(message,type='success'){const existingMessages=document.querySelectorAll('.status-message');existingMessages.forEach(msg=> msg.remove());const messageDiv=document.createElement('div');messageDiv.className=`status-message ${type}`;messageDiv.textContent=message;document.body.appendChild(messageDiv);setTimeout(()=>{if(messageDiv.parentNode){messageDiv.remove();}},5000);console.log(`ðŸ“¢ ${type.toUpperCase()}: ${message}`);}function saveSearchData(searchData){localStorage.setItem('villaSearch',JSON.stringify(searchData));console.log('ðŸ’¾ Recherche sauvegardÃ©e:',searchData);}function loadSearchData(){const saved=localStorage.getItem('villaSearch');if(saved){const data=JSON.parse(saved);currentSearch={...currentSearch,...data};console.log('ðŸ“‚ Recherche chargÃ©e:',currentSearch);return data;}return null;}function saveReservationData(reservationData){localStorage.setItem('villaReservation',JSON.stringify(reservationData));console.log('ðŸ’¾ RÃ©servation sauvegardÃ©e:',reservationData);}function loadReservationData(){const saved=localStorage.getItem('villaReservation');if(saved){const data=JSON.parse(saved);console.log('ðŸ“‚ RÃ©servation chargÃ©e:',data);return data;}return null;}function getVillaById(id){return villasData.find(villa=> villa.id===id);}function filterVillasByCategory(category){if(category==='all'){return villasData;}return villasData.filter(villa=> villa.category===category);}function searchVillas(searchCriteria){let filtered=[...villasData];if(searchCriteria.destination){filtered=filtered.filter(villa=> villa.location.toLowerCase().includes(searchCriteria.destination.toLowerCase()));}if(searchCriteria.totalGuests){filtered=filtered.filter(villa=> villa.guests >=searchCriteria.totalGuests);}if(searchCriteria.maxPrice){filtered=filtered.filter(villa=> villa.price <=searchCriteria.maxPrice);}console.log(`ðŸ” ${filtered.length}villas trouvÃ©es sur ${villasData.length}`);return filtered;}function calculateTotalGuests(adults,children,babies){return parseInt(adults)+parseInt(children);}function formatPrice(price){return new Intl.NumberFormat('fr-FR',{style: 'currency',currency: 'EUR'}).format(price);}function formatDate(dateString){if(!dateString)return '';const date=new Date(dateString);return date.toLocaleDateString('fr-FR');}function getURLParameter(param){const urlParams=new URLSearchParams(window.location.search);return urlParams.get(param);}function setURLParameter(param,value){const url=new URL(window.location);url.searchParams.set(param,value);window.history.pushState({},'',url);}function navigateToVillaDetails(villaId){window.location.href=`villa-details.html?villa=${villaId}`;}function navigateToReservation(villaId){saveSearchData(currentSearch);window.location.href=`reservation.html?villa=${villaId}`;}function smoothPageTransition(callback){document.body.style.opacity='0.8';document.body.style.transform='scale(0.98)';setTimeout(()=>{if(callback)callback();document.body.style.opacity='1';document.body.style.transform='scale(1)';},200);}function addGlassEffect(element){element.style.background='var(--glass-bg)';element.style.backdropFilter='blur(20px)';element.style.webkitBackdropFilter='blur(20px)';element.style.border='1px solid var(--glass-border)';element.style.boxShadow='var(--glass-shadow)';}function addWaveAnimation(element){element.classList.add('wave-animation');}document.addEventListener('DOMContentLoaded',function(){console.log('ðŸš€ Villa Martinique-Initialisation...');initNavigation();loadSearchData();const welcomeMessages={'index.html': 'ðŸï¸ Bienvenue sur Villa Martinique !','villas.html': 'ðŸ–ï¸ DÃ©couvrez nos villas de luxe','reservation.html': 'ðŸ“… Finalisez votre rÃ©servation','villa-details.html': 'ðŸŒº DÃ©tails de la villa','contact.html': 'ðŸ“ž Contactez-nous'};const message=welcomeMessages[currentPage] || 'ðŸŒŠ Villa Martinique';showStatusMessage(message,'success');addGlobalEventListeners();console.log(`âœ… ${currentPage}initialisÃ© avec succÃ¨s`);});function addGlobalEventListeners(){document.addEventListener('click',function(event){const dropdowns=document.querySelectorAll('.dropdown-glass.active');dropdowns.forEach(dropdown=>{if(!dropdown.contains(event.target)&& !event.target.closest('[data-dropdown]')){dropdown.classList.remove('active');}});});document.addEventListener('keydown',function(event){if(event.key==='Escape'){const modals=document.querySelectorAll('.modal-glass');const dropdowns=document.querySelectorAll('.dropdown-glass.active');modals.forEach(modal=> modal.remove());dropdowns.forEach(dropdown=> dropdown.classList.remove('active'));}});}window.VillaMartinique={villasData,communesMartinique,currentSearch,filteredVillas,showStatusMessage,saveSearchData,loadSearchData,saveReservationData,loadReservationData,getVillaById,filterVillasByCategory,searchVillas,calculateTotalGuests,formatPrice,formatDate,getURLParameter,setURLParameter,navigateToVillaDetails,navigateToReservation,smoothPageTransition,addGlassEffect,addWaveAnimation};console.log('ðŸŽ¯ Villa Martinique Core chargÃ© successfully!');