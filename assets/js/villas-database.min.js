
// PROTECTION IMAGES/VIDÉOS - NE PAS SUPPRIMER
function protectMediaElements() {
    const mediaElements = document.querySelectorAll('img, video');
    mediaElements.forEach(element => {
        element.setAttribute('data-protected', 'true');
    });
}

// Protéger avant toute modification DOM
if (typeof MutationObserver !== 'undefined') {
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.type === 'childList') {
                // Vérifier que les éléments média ne sont pas supprimés
                mutation.removedNodes.forEach(function(node) {
                    if (node.nodeType === 1 && (node.tagName === 'IMG' || node.tagName === 'VIDEO')) {
                        console.warn('⚠️ Tentative de suppression d\'élément média détectée:', node);
                    }
                });
            }
        });
    });
    
    observer.observe(document.body, {
        childList: true,
        subtree: true
    });
}


const VILLAS_DATABASE={"villas": [{"id": 1,"nom": "Villa F5 Ste Anne","prix_base": 1300,"prix_affiche": "1300€","localisation": "Quartier Les Anglais,Ste Anne","capacite": 10,"capacite_detail": "10 personnes+15 invités","type_logement": "4 chambres,4 salles d'eau","equipements": "Piscine,décoration rose distinctive,terrasses couvertes","categorie": "sejour","photos": [ "https: "https: "https: ]},{"id": 2,"nom": "Villa F6 Petit Macabou","prix_base": 2000,"prix_affiche": "2000€","localisation": "Petit Macabou au Vauclin","capacite": 13,"capacite_detail": "10 à 13 personnes(14 max)","type_logement": "3 chambres+1 mezzanine+2 studios","equipements": "Piscine,climatisation,3 bungalows supplémentaires","categorie": "sejour","photos": [ "https: ]},{"id": 3,"nom": "Studio Cocooning Lamentin","prix_base": 290,"prix_affiche": "290€","localisation": "Morne Pitault,Lamentin","capacite": 2,"capacite_detail": "2 personnes(couple)","type_logement": "Studio avec bac à punch privé","equipements": "Cuisine moderne,jacuzzi/bac à punch,vue panoramique","categorie": "special","photos": [ "https: ]}],"categories":{"sejour":{"nom": "Villas de Séjour","icon": "🏖️","count": 13},"fete":{"nom": "Villas Fête/Journée","icon": "🎉","count": 5},"special":{"nom": "Locations Spéciales","icon": "🏠","count": 3}}};function getVillas(){return VILLAS_DATABASE.villas;}function filterVillas(category=null){if(!category)return VILLAS_DATABASE.villas;return VILLAS_DATABASE.villas.filter(villa=> villa.categorie===category);}function searchVillas(query){const searchTerm=query.toLowerCase();return VILLAS_DATABASE.villas.filter(villa=> villa.nom.toLowerCase().includes(searchTerm)|| villa.localisation.toLowerCase().includes(searchTerm));}function displayVillas(villas){const container=document.getElementById('villasGrid');// PROTECTION: Utiliser insertAdjacentHTML au lieu de innerHTML
    container.innerHTML = villas.map(villa=> ` <div class="glass-card p-4"> <h3 class="text-xl font-bold text-white mb-2">${villa.nom}</h3> <p class="text-gray-200 mb-2">${villa.localisation}</p> <p class="text-yellow-400 font-bold mb-3">${villa.prix_affiche}/nuit</p> <div class="grid grid-cols-3 gap-2"> ${villa.photos.slice(0,3).map(photo=> ` <img src="${photo}" alt="Photo villa" class="w-full h-20 object-cover rounded"> `).join('')}</div> </div> `).join('');}document.addEventListener('DOMContentLoaded',function(){displayVillas(getVillas());});