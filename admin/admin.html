<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KhanelConcept - Administration</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        body {
            background: var(--primary-gradient);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 280px;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            border-right: 1px solid var(--glass-border);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .sidebar-header {
            padding: 30px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }

        .sidebar-header h3 {
            color: white;
            font-weight: bold;
            margin: 10px 0 5px;
        }

        .sidebar-header p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin: 0;
        }

        .sidebar-nav {
            padding: 20px 0;
        }

        .nav-item {
            margin: 5px 15px;
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.8) !important;
            padding: 15px 20px;
            border-radius: 15px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            text-decoration: none;
        }

        .nav-link:hover, .nav-link.active {
            background: rgba(255, 255, 255, 0.15);
            color: white !important;
            transform: translateX(5px);
        }

        .nav-link i {
            margin-right: 12px;
            width: 20px;
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            padding: 30px;
            min-height: 100vh;
        }

        /* Header */
        .content-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 20px 30px;
            margin-bottom: 30px;
            display: flex;
            justify-content: between;
            align-items: center;
        }

        .content-header h1 {
            color: white;
            margin: 0;
            font-weight: bold;
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

        /* Glass Cards */
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--success-gradient);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #00f2fe;
            margin-bottom: 10px;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .stat-change {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        /* Buttons */
        .btn-gradient {
            background: var(--success-gradient);
            border: none;
            color: white;
            font-weight: 600;
            padding: 12px 25px;
            border-radius: 25px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.3);
        }

        .btn-gradient:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.4);
            color: white;
        }

        .btn-gradient-danger {
            background: var(--secondary-gradient);
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.3);
        }

        .btn-gradient-danger:hover {
            box-shadow: 0 8px 25px rgba(245, 87, 108, 0.4);
        }

        /* Villa Cards */
        .villa-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .villa-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
        }

        .villa-card:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .villa-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 15px;
            margin-bottom: 15px;
        }

        .villa-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--success-gradient);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .villa-title {
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .villa-info {
            color: rgba(255, 255, 255, 0.8);
            margin: 8px 0;
            display: flex;
            align-items: center;
        }

        .villa-info i {
            margin-right: 8px;
            width: 16px;
        }

        .villa-price {
            background: var(--secondary-gradient);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin: 10px 0;
        }

        .villa-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn-action {
            flex: 1;
            padding: 8px 15px;
            border-radius: 12px;
            border: none;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .btn-edit {
            background: rgba(79, 172, 254, 0.2);
            color: #4facfe;
            border: 1px solid rgba(79, 172, 254, 0.3);
        }

        .btn-edit:hover {
            background: rgba(79, 172, 254, 0.3);
            color: white;
        }

        .btn-delete {
            background: rgba(245, 87, 108, 0.2);
            color: #f5576c;
            border: 1px solid rgba(245, 87, 108, 0.3);
        }

        .btn-delete:hover {
            background: rgba(245, 87, 108, 0.3);
            color: white;
        }

        /* Charts */
        .chart-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
        }

        .chart-title {
            color: white;
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }

        /* Modals */
        .modal-content {
            background: rgba(40, 44, 52, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            color: white;
        }

        .modal-header {
            background: var(--primary-gradient);
            color: white;
            border-radius: 20px 20px 0 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .modal-body {
            background: rgba(40, 44, 52, 0.9);
            color: white;
        }

        .modal-footer {
            background: rgba(40, 44, 52, 0.9);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0 0 20px 20px;
        }

        /* Form Controls */
        .form-control, .form-select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            border-radius: 12px;
        }

        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .form-control:focus, .form-select:focus {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
            color: white;
            box-shadow: 0 0 0 0.25rem rgba(255, 255, 255, 0.1);
        }

        .form-label {
            color: white;
            font-weight: 500;
        }

        /* Toast */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1050;
        }

        .toast {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .main-content {
                margin-left: 0;
                padding: 15px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .villa-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Success Animation */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse { animation: pulse 0.6s ease-in-out; }

        .text-white { color: white !important; }
        .text-white-50 { color: rgba(255, 255, 255, 0.5) !important; }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-hotel fa-2x text-white mb-2"></i>
            <h3>KhanelConcept</h3>
            <p>Administration</p>
        </div>
        <nav class="sidebar-nav">
            <div class="nav-item">
                <a href="#" class="nav-link active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    Dashboard
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" data-section="villas">
                    <i class="fas fa-hotel"></i>
                    Gestion Villas
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" data-section="reservations">
                    <i class="fas fa-calendar-check"></i>
                    Réservations
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" data-section="analytics">
                    <i class="fas fa-chart-bar"></i>
                    Analytiques
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" data-section="settings">
                    <i class="fas fa-cog"></i>
                    Paramètres
                </a>
            </div>
            <div class="nav-item mt-4">
                <a href="../index.html" class="nav-link">
                    <i class="fas fa-home"></i>
                    Retour Site
                </a>
            </div>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <div class="content-header">
            <div>
                <h1 id="pageTitle">Dashboard</h1>
                <p class="text-white-50 m-0">Gestion complète de vos villas</p>
            </div>
            <div class="header-actions">
                <button class="btn btn-gradient" onclick="syncWithMainSite()">
                    <i class="fas fa-sync-alt me-2"></i>
                    <span id="syncText">Sync Site</span>
                </button>
                <button class="btn btn-gradient-danger" onclick="logout()">
                    <i class="fas fa-sign-out-alt me-2"></i>Déconnexion
                </button>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboard-section" class="content-section">
            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalVillas">21</div>
                    <div class="stat-label">Villas Totales</div>
                    <div class="stat-change">+2 ce mois</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeVillas">21</div>
                    <div class="stat-label">Villas Actives</div>
                    <div class="stat-change">100% disponibles</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">861€</div>
                    <div class="stat-label">Prix Moyen</div>
                    <div class="stat-change">+5% vs mois dernier</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalReservations">47</div>
                    <div class="stat-label">Réservations</div>
                    <div class="stat-change">+12% ce mois</div>
                </div>
            </div>

            <!-- Charts Row -->
            <div class="row">
                <div class="col-md-6">
                    <div class="chart-container">
                        <div class="chart-title">Répartition par Prix</div>
                        <canvas id="priceChart" height="200"></canvas>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="chart-container">
                        <div class="chart-title">Répartition par Catégorie</div>
                        <canvas id="categoryChart" height="200"></canvas>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="glass-card p-4 mt-4">
                <h3 class="text-white mb-3">
                    <i class="fas fa-clock me-2"></i>Activité Récente
                </h3>
                <div id="recentActivity">
                    <div class="d-flex align-items-center mb-3">
                        <div class="bg-success rounded-circle p-2 me-3">
                            <i class="fas fa-plus text-white"></i>
                        </div>
                        <div class="text-white">
                            <strong>Villa F7 Baie des Mulets</strong> ajoutée
                            <small class="d-block text-white-50">Il y a 2 heures</small>
                        </div>
                    </div>
                    <div class="d-flex align-items-center mb-3">
                        <div class="bg-primary rounded-circle p-2 me-3">
                            <i class="fas fa-sync-alt text-white"></i>
                        </div>
                        <div class="text-white">
                            Synchronisation effectuée avec succès
                            <small class="d-block text-white-50">Il y a 5 minutes</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Villas Section -->
        <div id="villas-section" class="content-section" style="display: none;">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h2 class="text-white">Gestion des Villas</h2>
                    <p class="text-white-50">Gérez vos 21 villas de luxe</p>
                </div>
                <button class="btn btn-gradient" onclick="showAddVillaModal()">
                    <i class="fas fa-plus me-2"></i>Ajouter Villa
                </button>
            </div>

            <!-- Search and Filter -->
            <div class="glass-card p-3 mb-4">
                <div class="row">
                    <div class="col-md-6">
                        <input type="text" class="form-control" id="villaSearch" placeholder="🔍 Rechercher une villa...">
                    </div>
                    <div class="col-md-3">
                        <select class="form-select" id="categoryFilter">
                            <option value="">Toutes catégories</option>
                            <option value="sejour">Séjour</option>
                            <option value="fete">Fête/Événement</option>
                            <option value="piscine">Espace Piscine</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <select class="form-select" id="priceFilter">
                            <option value="">Tous prix</option>
                            <option value="0-1000">0€ - 1000€</option>
                            <option value="1000-1500">1000€ - 1500€</option>
                            <option value="1500-2500">1500€+</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Villas Grid -->
            <div class="villa-grid" id="villasGrid">
                <!-- Les villas seront chargées ici -->
            </div>
        </div>

        <!-- Reservations Section -->
        <div id="reservations-section" class="content-section" style="display: none;">
            <div class="glass-card p-4">
                <h3 class="text-white mb-4">
                    <i class="fas fa-calendar-check me-2"></i>Gestion des Réservations
                </h3>
                <div class="text-center">
                    <i class="fas fa-calendar-check fa-3x text-white mb-3 opacity-50"></i>
                    <h4 class="text-white">Module Réservations</h4>
                    <p class="text-white-50">Cette fonctionnalité sera bientôt disponible.</p>
                    <p class="text-white-50">En attendant, les réservations peuvent être gérées manuellement.</p>
                </div>
            </div>
        </div>

        <!-- Analytics Section -->
        <div id="analytics-section" class="content-section" style="display: none;">
            <div class="glass-card p-4">
                <h3 class="text-white mb-4">
                    <i class="fas fa-chart-bar me-2"></i>Analytiques Avancées
                </h3>
                <div class="text-center">
                    <i class="fas fa-chart-line fa-3x text-white mb-3 opacity-50"></i>
                    <h4 class="text-white">Module Analytiques</h4>
                    <p class="text-white-50">Statistiques détaillées en cours de développement.</p>
                    <p class="text-white-50">Les graphiques de base sont disponibles dans le Dashboard.</p>
                </div>
            </div>
        </div>

        <!-- Settings Section -->
        <div id="settings-section" class="content-section" style="display: none;">
            <div class="glass-card p-4">
                <h3 class="text-white mb-4">
                    <i class="fas fa-cog me-2"></i>Paramètres de l'Application
                </h3>
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label text-white">Nom de l'établissement</label>
                            <input type="text" class="form-control" value="KhanelConcept" readonly>
                        </div>
                        <div class="mb-3">
                            <label class="form-label text-white">Email de contact</label>
                            <input type="email" class="form-control" value="contact@khanelconcept.com" readonly>
                        </div>
                        <div class="mb-3">
                            <label class="form-label text-white">Version admin</label>
                            <input type="text" class="form-control" value="2.0 - Janvier 2025" readonly>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label text-white">Téléphone</label>
                            <input type="tel" class="form-control" value="+596 696 XX XX XX" readonly>
                        </div>
                        <div class="mb-3">
                            <label class="form-label text-white">Nombre de villas</label>
                            <input type="text" class="form-control" value="21 villas actives" readonly>
                        </div>
                        <div class="mb-3">
                            <label class="form-label text-white">Statut</label>
                            <div class="badge bg-success mt-2">✅ Système opérationnel</div>
                        </div>
                    </div>
                </div>
                <hr class="text-white-50">
                <h5 class="text-white mt-4">Actions système</h5>
                <div class="d-flex gap-3 mt-3">
                    <button class="btn btn-gradient" onclick="syncWithMainSite()">
                        <i class="fas fa-sync-alt me-2"></i>Synchroniser le site
                    </button>
                    <button class="btn btn-gradient-danger" onclick="clearCache()">
                        <i class="fas fa-trash me-2"></i>Vider le cache
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Villa Modal -->
    <div class="modal fade" id="villaModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalTitle">Ajouter une Villa</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="villaForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Nom de la villa</label>
                                    <input type="text" class="form-control" id="villaName" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Localisation</label>
                                    <input type="text" class="form-control" id="villaLocation" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Prix (€/nuit)</label>
                                    <input type="number" class="form-control" id="villaPrice" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Capacité (personnes)</label>
                                    <input type="number" class="form-control" id="villaGuests" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Catégorie</label>
                                    <select class="form-select" id="villaCategory" required>
                                        <option value="">Sélectionner...</option>
                                        <option value="sejour">Séjour</option>
                                        <option value="fete">Fête/Événement</option>
                                        <option value="piscine">Espace Piscine</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Emoji représentatif</label>
                                    <input type="text" class="form-control" id="villaIcon" placeholder="🏊">
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Description/Équipements</label>
                            <textarea class="form-control" id="villaFeatures" rows="3" placeholder="Piscine, Wi-Fi, Cuisine équipée..."></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Image principale</label>
                            <input type="file" class="form-control" id="villaImage" accept="image/*">
                            <small class="text-muted">L'image sera convertie en base64 pour GitHub Pages</small>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-gradient" onclick="saveVilla()">
                        <i class="fas fa-save me-2"></i>Sauvegarder
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container">
        <div id="successToast" class="toast" role="alert">
            <div class="toast-header bg-success text-white">
                <i class="fas fa-check-circle me-2"></i>
                <strong class="me-auto">Succès</strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toastMessage">
                Message ici
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Données des 21 villas pour l'admin
        const villasData = [
            {
                id: 1,
                name: "Villa F3 Petit Macabou",
                location: "Petit Macabou au Vauclin",
                price: 850,
                guests: 6,
                guestsDetail: "6 personnes + 9 invités",
                features: "Sauna, Jacuzzi, 2 douches extérieures",
                category: "sejour",
                image: "../images/Villa_F3_Petit_Macabou/01_piscine_exterieur.jpg",
                gallery: [
                    "../images/Villa_F3_Petit_Macabou/01_piscine_exterieur.jpg",
                    "../images/Villa_F3_Petit_Macabou/02_terrasse_salon_exterieur.jpg",
                    "../images/Villa_F3_Petit_Macabou/03_salle_de_bain_moderne.jpg",
                    "../images/Villa_F3_Petit_Macabou/04_chambre_principale.jpg",
                    "../images/Villa_F3_Petit_Macabou/05_cuisine_equipee.jpg",
                    "../images/Villa_F3_Petit_Macabou/07_sauna_detente.jpg",
                    "../images/Villa_F3_Petit_Macabou/08_douche_exterieure.jpg"
                ],
                fallbackIcon: "🏊"
            },
            {
                id: 2,
                name: "Villa F5 Ste Anne",
                location: "Quartier Les Anglais, Ste Anne",
                price: 1300,
                guests: 10,
                guestsDetail: "10 personnes + 15 invités",
                features: "Piscine, décoration rose distinctive",
                category: "sejour",
                image: "../images/Villa_F5_Ste_Anne/01_piscine_principale.jpg",
                gallery: [
                    "../images/Villa_F5_Ste_Anne/01_piscine_principale.jpg",
                    "../images/Villa_F5_Ste_Anne/02_piscine_vue_aerienne.jpg",
                    "../images/Villa_F5_Ste_Anne/03_facade_villa_rose.jpg",
                    "../images/Villa_F5_Ste_Anne/04_cuisine_moderne.jpg",
                    "../images/Villa_F5_Ste_Anne/05_salon_principal.jpg",
                    "../images/Villa_F5_Ste_Anne/06_chambre_principale.jpg"
                ],
                fallbackIcon: "🌸"
            },
            {
                id: 3,
                name: "Villa F3 Baccha Petit Macabou",
                location: "Petit Macabou",
                price: 1350,
                guests: 6,
                guestsDetail: "6 personnes + 9 convives",
                features: "Piscine, terrasses modernes",
                category: "sejour",
                image: "../images/Villa_F3_Baccha_Petit_Macabou/01_terrasse_piscine_salon_ext.jpg",
                gallery: [
                    "../images/Villa_F3_Baccha_Petit_Macabou/01_terrasse_piscine_salon_ext.jpg",
                    "../images/Villa_F3_Baccha_Petit_Macabou/02_terrasse_piscine_angle.jpg",
                    "../images/Villa_F3_Baccha_Petit_Macabou/03_chambre_moderne.jpg",
                    "../images/Villa_F3_Baccha_Petit_Macabou/04_terrasse_jardin.jpg",
                    "../images/Villa_F3_Baccha_Petit_Macabou/05_cuisine_equipee.jpg",
                    "../images/Villa_F3_Baccha_Petit_Macabou/06_chambre_2.jpg"
                ],
                fallbackIcon: "🏖️"
            },
            {
                id: 4,
                name: "Villa F6 Lamentin",
                location: "Quartier Bélème au Lamentin",
                price: 1500,
                guests: 10,
                guestsDetail: "10 personnes + 20 invités max",
                features: "Piscine, Jacuzzi, douche extérieure",
                category: "sejour",
                image: "../images/Villa_F6_Lamentin/01_piscine_jacuzzi_vue_ensemble.jpg",
                gallery: [
                    "../images/Villa_F6_Lamentin/01_piscine_jacuzzi_vue_ensemble.jpg"
                ],
                fallbackIcon: "🛁"
            },
            {
                id: 5,
                name: "Villa F6 Ste Luce Plage",
                location: "Zac de Pont Café, Ste Luce",
                price: 1700,
                guests: 14,
                guestsDetail: "10 à 14 personnes",
                features: "Piscine, 1 minute de la plage",
                category: "sejour",
                image: "../images/Villa_F6_Ste_Luce_Plage/02_chambre_poutres.jpg",
                gallery: [
                    "../images/Villa_F6_Ste_Luce_Plage/02_chambre_poutres.jpg",
                    "../images/Villa_F6_Ste_Luce_Plage/03_cuisine_moderne.jpg",
                    "../images/Villa_F6_Ste_Luce_Plage/04_salle_a_manger.jpg",
                    "../images/Villa_F6_Ste_Luce_Plage/05_vue_aerienne_piscine.jpg",
                    "../images/Villa_F6_Ste_Luce_Plage/06_salon_piscine.jpg"
                ],
                fallbackIcon: "🏖️"
            },
            {
                id: 6,
                name: "Villa F6 Petit Macabou",
                location: "Petit Macabou au Vauclin",
                price: 2000,
                guests: 13,
                guestsDetail: "10 à 13 personnes (14 max)",
                features: "Piscine, fêtes jusqu'à 150 convives",
                category: "sejour",
                image: "../images/Villa_F6_Petit_Macabou/02_salle_de_bain.jpg",
                gallery: [
                    "../images/Villa_F6_Petit_Macabou/02_salle_de_bain.jpg",
                    "../images/Villa_F6_Petit_Macabou/03_chambre_studio.jpg",
                    "../images/Villa_F6_Petit_Macabou/04_salon_mezzanine.jpg",
                    "../images/Villa_F6_Petit_Macabou/05_cuisine_moderne.jpg",
                    "../images/Villa_F6_Petit_Macabou/06_terrasse_couverte.jpg",
                    "../images/Villa_F6_Petit_Macabou/07_terrasse_piscine.jpg",
                    "../images/Villa_F6_Petit_Macabou/10_vue_aerienne_jour.jpg"
                ],
                fallbackIcon: "🎊"
            },
            {
                id: 7,
                name: "Villa F7 Baie des Mulets",
                location: "Baie des Mulets, Trinité",
                price: 2200,
                guests: 15,
                guestsDetail: "10 à 15 personnes (16 max)",
                features: "Vue mer exceptionnelle, piscine",
                category: "sejour",
                image: "../images/Villa_F7_Baie_des_Mulets/01_piscine_vue_mer.jpg",
                gallery: [
                    "../images/Villa_F7_Baie_des_Mulets/01_piscine_vue_mer.jpg"
                ],
                fallbackIcon: "🌊"
            },
            {
                id: 8,
                name: "Villa F3 Trinité (Cosmy)",
                location: "Cosmy, Trinité",
                price: 900,
                guests: 6,
                guestsDetail: "6 personnes + 9 convives",
                features: "Piscine, terrasse aménagée",
                category: "sejour",
                image: "../images/Villa_F3_Trinite_Cosmy/01_piscine_terrasse.jpg",
                gallery: [
                    "../images/Villa_F3_Trinite_Cosmy/01_piscine_terrasse.jpg"
                ],
                fallbackIcon: "🏝️"
            },
            {
                id: 9,
                name: "Villa F3 Le Robert",
                location: "Le Robert",
                price: 1000,
                guests: 6,
                guestsDetail: "6 personnes + 9 convives",
                features: "Piscine, proximité centre-ville",
                category: "sejour",
                image: "../images/Villa_F3_Le_Robert/01_piscine_jardin.jpg",
                gallery: [
                    "../images/Villa_F3_Le_Robert/01_piscine_jardin.jpg"
                ],
                fallbackIcon: "🏘️"
            },
            {
                id: 10,
                name: "Villa F5 R.Pilote",
                location: "Rivière-Pilote",
                price: 1200,
                guests: 8,
                guestsDetail: "8 personnes + 12 convives",
                features: "Piscine, grand jardin",
                category: "sejour",
                image: "../images/Villa_F5_R_Pilote/01_facade_piscine.jpg",
                gallery: [
                    "../images/Villa_F5_R_Pilote/01_facade_piscine.jpg"
                ],
                fallbackIcon: "🌳"
            },
            {
                id: 11,
                name: "Villa F3 Le François",
                location: "Le François",
                price: 1100,
                guests: 6,
                guestsDetail: "6 personnes + 9 convives",
                features: "Piscine, vue dégagée",
                category: "sejour",
                image: "../images/Villa_F3_Le_Francois/01_piscine_moderne.jpg",
                gallery: [
                    "../images/Villa_F3_Le_Francois/01_piscine_moderne.jpg"
                ],
                fallbackIcon: "🏞️"
            },
            {
                id: 12,
                name: "Villa F5 Vauclin Ravine Plate",
                location: "Ravine Plate, Le Vauclin",
                price: 1400,
                guests: 10,
                guestsDetail: "10 personnes + 15 convives",
                features: "Piscine, terrasses étagées",
                category: "sejour",
                image: "../images/Villa_F5_Vauclin_Ravine_Plate/01_piscine_terrasse.jpg",
                gallery: [
                    "../images/Villa_F5_Vauclin_Ravine_Plate/01_piscine_terrasse.jpg"
                ],
                fallbackIcon: "⛰️"
            },
            {
                id: 13,
                name: "Bas Villa F3 Ste Luce",
                location: "Ste Luce",
                price: 1300,
                guests: 8,
                guestsDetail: "8 personnes + 12 convives",
                features: "Piscine, proche plages",
                category: "sejour",
                image: "../images/Bas_Villa_F3_Ste_Luce/01_piscine_palmiers.jpg",
                gallery: [
                    "../images/Bas_Villa_F3_Ste_Luce/01_piscine_palmiers.jpg"
                ],
                fallbackIcon: "🌴"
            },
            {
                id: 14,
                name: "Villa F3 Trenelle",
                location: "Trenelle",
                price: 1600,
                guests: 6,
                guestsDetail: "6 personnes + 9 convives",
                features: "Piscine premium, environnement calme",
                category: "sejour",
                image: "../images/Villa_F3_Trenelle/01_piscine_moderne.jpg",
                gallery: [
                    "../images/Villa_F3_Trenelle/01_piscine_moderne.jpg"
                ],
                fallbackIcon: "🌿"
            },
            {
                id: 15,
                name: "Studio Cocooning Lamentin",
                location: "Lamentin",
                price: 600,
                guests: 2,
                guestsDetail: "2 personnes max",
                features: "Studio romantique, équipements modernes",
                category: "sejour",
                image: "../images/Studio_Cocooning_Lamentin/01_studio_moderne.jpg",
                gallery: [
                    "../images/Studio_Cocooning_Lamentin/01_studio_moderne.jpg"
                ],
                fallbackIcon: "💕"
            },
            {
                id: 16,
                name: "Espace Piscine Journée Bungalow",
                location: "Bungalow",
                price: 150,
                priceUnit: "€/jour",
                guests: 8,
                guestsDetail: "Jusqu'à 8 personnes",
                features: "Piscine, espace détente journée",
                category: "piscine",
                image: "../images/Espace_Piscine_Journee_Bungalow/01_piscine_detente.jpg",
                gallery: [
                    "../images/Espace_Piscine_Journee_Bungalow/01_piscine_detente.jpg"
                ],
                fallbackIcon: "☀️"
            },
            {
                id: 17,
                name: "Villa Fête Ducos",
                location: "Ducos",
                price: 200,
                priceUnit: "€/jour",
                guests: 25,
                guestsDetail: "Jusqu'à 25 personnes",
                features: "Espace fête, son autorisé",
                category: "fete",
                image: "../images/Villa_Fete_Ducos/01_espace_reception.jpg",
                gallery: [
                    "../images/Villa_Fete_Ducos/01_espace_reception.jpg"
                ],
                fallbackIcon: "🎉"
            },
            {
                id: 18,
                name: "Villa Fête Fort-de-France",
                location: "Fort-de-France",
                price: 180,
                priceUnit: "€/jour",
                guests: 20,
                guestsDetail: "Jusqu'à 20 personnes",
                features: "Centre-ville, espace modulable",
                category: "fete",
                image: "../images/Villa_Fete_Fort_de_France/01_salon_fete.jpg",
                gallery: [
                    "../images/Villa_Fete_Fort_de_France/01_salon_fete.jpg"
                ],
                fallbackIcon: "🏛️"
            },
            {
                id: 19,
                name: "Villa Fête Rivière-Pilote",
                location: "Rivière-Pilote",
                price: 250,
                priceUnit: "€/jour",
                guests: 35,
                guestsDetail: "Jusqu'à 35 personnes",
                features: "Grande capacité, jardin spacieux",
                category: "fete",
                image: "../images/Villa_Fete_Riviere_Pilote/01_grand_jardin.jpg",
                gallery: [
                    "../images/Villa_Fete_Riviere_Pilote/01_grand_jardin.jpg"
                ],
                fallbackIcon: "🎪"
            },
            {
                id: 20,
                name: "Villa Fête Sainte-Luce",
                location: "Sainte-Luce",
                price: 160,
                priceUnit: "€/jour",
                guests: 15,
                guestsDetail: "Jusqu'à 15 personnes",
                features: "Proximité plage, ambiance tropicale",
                category: "fete",
                image: "../images/Villa_Fete_Journee_Sainte_Luce/01_terrasse_fete.jpg",
                gallery: [
                    "../images/Villa_Fete_Journee_Sainte_Luce/01_terrasse_fete.jpg"
                ],
                fallbackIcon: "🏖️"
            },
            {
                id: 21,
                name: "Villa Fête Rivière-Salée",
                location: "Rivière-Salée",
                price: 160,
                priceUnit: "€/jour",
                guests: 15,
                guestsDetail: "Jusqu'à 15 personnes",
                features: "Piscine, tente couverte",
                category: "fete",
                image: "../images/Villa_Fete_Journee_Riviere_Salee/01_piscine_tente_couverte.jpg",
                gallery: [
                    "../images/Villa_Fete_Journee_Riviere_Salee/01_piscine_tente_couverte.jpg"
                ],
                fallbackIcon: "⛺"
            }
        ];

        // Variables globales
        let currentSection = 'dashboard';
        let currentVilla = null;
        let filteredVillas = [...villasData];
        let priceChart = null;
        let categoryChart = null;

        // Fonction d'initialisation
        document.addEventListener('DOMContentLoaded', function() {
            console.log("🚀 Advanced Admin loaded with", villasData.length, "villas");
            initializeNavigation();
            initializeCharts();
            displayVillas();
            initializeFilters();
        });

        // Navigation entre sections
        function initializeNavigation() {
            document.querySelectorAll('.nav-link[data-section]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.dataset.section;
                    showSection(section);
                });
            });
        }

        function showSection(sectionName) {
            // Cacher toutes les sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.style.display = 'none';
            });

            // Afficher la section demandée
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.style.display = 'block';
            }

            // Mettre à jour la navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`[data-section="${sectionName}"]`).classList.add('active');

            // Mettre à jour le titre
            const titles = {
                dashboard: 'Dashboard',
                villas: 'Gestion des Villas',
                reservations: 'Réservations',
                analytics: 'Analytiques',
                settings: 'Paramètres'
            };
            document.getElementById('pageTitle').textContent = titles[sectionName] || sectionName;

            currentSection = sectionName;
        }

        // Initialisation des graphiques
        function initializeCharts() {
            const priceCtx = document.getElementById('priceChart');
            const categoryCtx = document.getElementById('categoryChart');

            // Graphique des prix
            if (priceCtx) {
                const priceRanges = {
                    '< 1000€': villasData.filter(v => v.price < 1000).length,
                    '1000-1500€': villasData.filter(v => v.price >= 1000 && v.price < 1500).length,
                    '1500-2000€': villasData.filter(v => v.price >= 1500 && v.price < 2000).length,
                    '> 2000€': villasData.filter(v => v.price >= 2000).length
                };

                priceChart = new Chart(priceCtx, {
                    type: 'doughnut',
                    data: {
                        labels: Object.keys(priceRanges),
                        datasets: [{
                            data: Object.values(priceRanges),
                            backgroundColor: [
                                'rgba(79, 172, 254, 0.8)',
                                'rgba(245, 87, 108, 0.8)',
                                'rgba(32, 201, 151, 0.8)',
                                'rgba(255, 193, 7, 0.8)'
                            ],
                            borderWidth: 2,
                            borderColor: 'rgba(255, 255, 255, 0.8)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: 'white',
                                    padding: 15
                                }
                            }
                        }
                    }
                });
            }

            // Graphique des catégories
            if (categoryCtx) {
                const categoryStats = {
                    'Séjour': villasData.filter(v => v.category === 'sejour').length,
                    'Fête': villasData.filter(v => v.category === 'fete').length,
                    'Piscine': villasData.filter(v => v.category === 'piscine').length
                };

                categoryChart = new Chart(categoryCtx, {
                    type: 'bar',
                    data: {
                        labels: Object.keys(categoryStats),
                        datasets: [{
                            label: 'Nombre de villas',
                            data: Object.values(categoryStats),
                            backgroundColor: [
                                'rgba(79, 172, 254, 0.8)',
                                'rgba(245, 87, 108, 0.8)',
                                'rgba(32, 201, 151, 0.8)'
                            ],
                            borderColor: [
                                'rgba(79, 172, 254, 1)',
                                'rgba(245, 87, 108, 1)',
                                'rgba(32, 201, 151, 1)'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    color: 'white'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                }
                            },
                            x: {
                                ticks: {
                                    color: 'white'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                }
                            }
                        }
                    }
                });
            }
        }

        // Affichage des villas
        function displayVillas() {
            const container = document.getElementById('villasGrid');
            if (!container) return;

            container.innerHTML = filteredVillas.map(villa => {
                const priceUnit = villa.priceUnit || '€/nuit';
                return `
                    <div class="villa-card">
                        <div class="villa-badge">#${villa.id}</div>
                        <img src="${villa.image}" 
                             alt="${villa.name}" 
                             class="villa-image"
                             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div style="display: none; height: 200px; align-items: center; justify-content: center; font-size: 4rem; background: rgba(255,255,255,0.1); border-radius: 15px; margin-bottom: 15px;">
                            ${villa.fallbackIcon}
                        </div>
                        
                        <h3 class="villa-title">${villa.name}</h3>
                        
                        <div class="villa-info">
                            <i class="fas fa-map-marker-alt"></i>
                            ${villa.location}
                        </div>
                        
                        <div class="villa-info">
                            <i class="fas fa-users"></i>
                            ${villa.guestsDetail}
                        </div>
                        
                        <div class="villa-price">${villa.price} ${priceUnit}</div>
                        
                        <p class="text-white-50" style="font-size: 0.9rem; line-height: 1.4;">
                            ${villa.features}
                        </p>
                        
                        <div class="villa-actions">
                            <button class="btn btn-action btn-edit" onclick="editVilla(${villa.id})">
                                <i class="fas fa-edit me-1"></i>Modifier
                            </button>
                            <button class="btn btn-action btn-delete" onclick="deleteVilla(${villa.id})">
                                <i class="fas fa-trash me-1"></i>Supprimer
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Initialisation des filtres
        function initializeFilters() {
            const searchInput = document.getElementById('villaSearch');
            const categoryFilter = document.getElementById('categoryFilter');
            const priceFilter = document.getElementById('priceFilter');

            if (searchInput) {
                searchInput.addEventListener('input', applyFilters);
            }
            if (categoryFilter) {
                categoryFilter.addEventListener('change', applyFilters);
            }
            if (priceFilter) {
                priceFilter.addEventListener('change', applyFilters);
            }
        }

        function applyFilters() {
            const searchTerm = document.getElementById('villaSearch')?.value.toLowerCase() || '';
            const categoryFilter = document.getElementById('categoryFilter')?.value || '';
            const priceFilter = document.getElementById('priceFilter')?.value || '';

            filteredVillas = villasData.filter(villa => {
                // Filtre de recherche
                const matchesSearch = villa.name.toLowerCase().includes(searchTerm) ||
                                    villa.location.toLowerCase().includes(searchTerm);
                
                // Filtre de catégorie
                const matchesCategory = !categoryFilter || villa.category === categoryFilter;
                
                // Filtre de prix
                let matchesPrice = true;
                if (priceFilter) {
                    const [min, max] = priceFilter.split('-').map(p => parseInt(p));
                    if (max) {
                        matchesPrice = villa.price >= min && villa.price <= max;
                    } else {
                        matchesPrice = villa.price >= min;
                    }
                }

                return matchesSearch && matchesCategory && matchesPrice;
            });

            displayVillas();
        }

        // Modal de villa
        function showAddVillaModal() {
            currentVilla = null;
            document.getElementById('modalTitle').textContent = 'Ajouter une Villa';
            document.getElementById('villaForm').reset();
            new bootstrap.Modal(document.getElementById('villaModal')).show();
        }

        function editVilla(villaId) {
            currentVilla = villasData.find(v => v.id === villaId);
            if (currentVilla) {
                document.getElementById('modalTitle').textContent = 'Modifier la Villa';
                document.getElementById('villaName').value = currentVilla.name;
                document.getElementById('villaLocation').value = currentVilla.location;
                document.getElementById('villaPrice').value = currentVilla.price;
                document.getElementById('villaGuests').value = currentVilla.guests;
                document.getElementById('villaCategory').value = currentVilla.category;
                document.getElementById('villaFeatures').value = currentVilla.features;
                document.getElementById('villaIcon').value = currentVilla.fallbackIcon;
                
                new bootstrap.Modal(document.getElementById('villaModal')).show();
            }
        }

        function saveVilla() {
            const form = document.getElementById('villaForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            const villaData = {
                name: document.getElementById('villaName').value,
                location: document.getElementById('villaLocation').value,
                price: parseInt(document.getElementById('villaPrice').value),
                guests: parseInt(document.getElementById('villaGuests').value),
                category: document.getElementById('villaCategory').value,
                features: document.getElementById('villaFeatures').value,
                fallbackIcon: document.getElementById('villaIcon').value || '🏨'
            };

            if (currentVilla) {
                // Modification
                Object.assign(currentVilla, villaData);
                showToast('Villa modifiée avec succès !', 'success');
            } else {
                // Ajout
                const newVilla = {
                    id: Math.max(...villasData.map(v => v.id)) + 1,
                    ...villaData,
                    guestsDetail: `${villaData.guests} personnes`,
                    image: `../images/placeholder.jpg`,
                    gallery: []
                };
                villasData.push(newVilla);
                showToast('Villa ajoutée avec succès !', 'success');
            }

            bootstrap.Modal.getInstance(document.getElementById('villaModal')).hide();
            displayVillas();
            updateStats();
        }

        function deleteVilla(villaId) {
            if (confirm('Êtes-vous sûr de vouloir supprimer cette villa ?')) {
                const index = villasData.findIndex(v => v.id === villaId);
                if (index > -1) {
                    villasData.splice(index, 1);
                    showToast('Villa supprimée avec succès !', 'success');
                    displayVillas();
                    updateStats();
                }
            }
        }

        // Mise à jour des statistiques
        function updateStats() {
            document.getElementById('totalVillas').textContent = villasData.length;
            document.getElementById('activeVillas').textContent = villasData.filter(v => v.price > 0).length;
        }

        // Fonction de synchronisation améliorée
        function syncWithMainSite() {
            const syncText = document.getElementById('syncText');
            const originalText = syncText.textContent;
            
            // Animation de chargement
            syncText.innerHTML = '<span class="loading"></span> Sync en cours...';
            
            setTimeout(() => {
                // Convertir les données admin vers le format du site principal
                const mainSiteData = villasData.map(villa => ({
                    id: villa.id,
                    name: villa.name,
                    location: villa.location,
                    price: villa.price,
                    guests: villa.guests,
                    guestsDetail: villa.guestsDetail,
                    features: villa.features,
                    category: villa.category,
                    image: villa.image,
                    gallery: villa.gallery,
                    fallbackIcon: villa.fallbackIcon,
                    priceUnit: villa.priceUnit
                }));
                
                // Sauvegarder dans localStorage pour que index.html puisse les lire
                localStorage.setItem('khanelconcept_villas', JSON.stringify(mainSiteData));
                
                // Animation de succès
                syncText.textContent = '✅ Synchronisé !';
                syncText.parentElement.classList.add('pulse');
                
                // Afficher notification
                showToast(`Synchronisation réussie ! ${mainSiteData.length} villas mises à jour.`, 'success');
                
                // Restaurer le texte original après 2 secondes
                setTimeout(() => {
                    syncText.textContent = originalText;
                    syncText.parentElement.classList.remove('pulse');
                }, 2000);
                
                console.log("✅ Advanced sync completed -", mainSiteData.length, "villas synchronized");
            }, 1500);
        }

        // Affichage des toasts
        function showToast(message, type = 'success') {
            const toastElement = document.getElementById('successToast');
            const toastMessage = document.getElementById('toastMessage');
            
            toastMessage.textContent = message;
            
            const toast = new bootstrap.Toast(toastElement);
            toast.show();
        }

        // Fonction de déconnexion
        function logout() {
            if (confirm('Êtes-vous sûr de vouloir vous déconnecter ?')) {
                window.location.href = 'login.html';
            }
        }

        console.log("🎉 KhanelConcept Advanced Admin Ready - 21 villas loaded!");
    </script>
        // Données des 21 villas pour l'admin
        const villasData = [
            {
                id: 1,
                name: "Villa F3 Petit Macabou",
                location: "Petit Macabou au Vauclin",
                price: 850,
                guests: 6,
                guestsDetail: "6 personnes + 9 invités",
                features: "Sauna, Jacuzzi, 2 douches extérieures",
                category: "sejour",
                image: "../images/Villa_F3_Petit_Macabou/01_piscine_exterieur.jpg",
                gallery: [
                    "../images/Villa_F3_Petit_Macabou/01_piscine_exterieur.jpg",
                    "../images/Villa_F3_Petit_Macabou/02_terrasse_salon_exterieur.jpg",
                    "../images/Villa_F3_Petit_Macabou/03_salle_de_bain_moderne.jpg",
                    "../images/Villa_F3_Petit_Macabou/04_chambre_principale.jpg",
                    "../images/Villa_F3_Petit_Macabou/05_cuisine_equipee.jpg",
                    "../images/Villa_F3_Petit_Macabou/07_sauna_detente.jpg",
                    "../images/Villa_F3_Petit_Macabou/08_douche_exterieure.jpg"
                ],
                fallbackIcon: "🏊"
            },
            {
                id: 2,
                name: "Villa F5 Ste Anne",
                location: "Quartier Les Anglais, Ste Anne",
                price: 1300,
                guests: 10,
                guestsDetail: "10 personnes + 15 invités",
                features: "Piscine, décoration rose distinctive",
                category: "sejour",
                image: "../images/Villa_F5_Ste_Anne/01_piscine_principale.jpg",
                gallery: [
                    "../images/Villa_F5_Ste_Anne/01_piscine_principale.jpg",
                    "../images/Villa_F5_Ste_Anne/02_piscine_vue_aerienne.jpg",
                    "../images/Villa_F5_Ste_Anne/03_facade_villa_rose.jpg",
                    "../images/Villa_F5_Ste_Anne/04_cuisine_moderne.jpg",
                    "../images/Villa_F5_Ste_Anne/05_salon_principal.jpg",
                    "../images/Villa_F5_Ste_Anne/06_chambre_principale.jpg"
                ],
                fallbackIcon: "🌸"
            },
            {
                id: 3,
                name: "Villa F3 Baccha Petit Macabou",
                location: "Petit Macabou",
                price: 1350,
                guests: 6,
                guestsDetail: "6 personnes + 9 convives",
                features: "Piscine, terrasses modernes",
                category: "sejour",
                image: "../images/Villa_F3_Baccha_Petit_Macabou/01_terrasse_piscine_salon_ext.jpg",
                gallery: [
                    "../images/Villa_F3_Baccha_Petit_Macabou/01_terrasse_piscine_salon_ext.jpg",
                    "../images/Villa_F3_Baccha_Petit_Macabou/02_terrasse_piscine_angle.jpg",
                    "../images/Villa_F3_Baccha_Petit_Macabou/03_chambre_moderne.jpg",
                    "../images/Villa_F3_Baccha_Petit_Macabou/04_terrasse_jardin.jpg",
                    "../images/Villa_F3_Baccha_Petit_Macabou/05_cuisine_equipee.jpg",
                    "../images/Villa_F3_Baccha_Petit_Macabou/06_chambre_2.jpg"
                ],
                fallbackIcon: "🏖️"
            },
            {
                id: 4,
                name: "Villa F6 Lamentin",
                location: "Quartier Bélème au Lamentin",
                price: 1500,
                guests: 10,
                guestsDetail: "10 personnes + 20 invités max",
                features: "Piscine, Jacuzzi, douche extérieure",
                category: "sejour",
                image: "../images/Villa_F6_Lamentin/01_piscine_jacuzzi_vue_ensemble.jpg",
                gallery: [
                    "../images/Villa_F6_Lamentin/01_piscine_jacuzzi_vue_ensemble.jpg"
                ],
                fallbackIcon: "🛁"
            },
            {
                id: 5,
                name: "Villa F6 Ste Luce Plage",
                location: "Zac de Pont Café, Ste Luce",
                price: 1700,
                guests: 14,
                guestsDetail: "10 à 14 personnes",
                features: "Piscine, 1 minute de la plage",
                category: "sejour",
                image: "../images/Villa_F6_Ste_Luce_Plage/02_chambre_poutres.jpg",
                gallery: [
                    "../images/Villa_F6_Ste_Luce_Plage/02_chambre_poutres.jpg",
                    "../images/Villa_F6_Ste_Luce_Plage/03_cuisine_moderne.jpg",
                    "../images/Villa_F6_Ste_Luce_Plage/04_salle_a_manger.jpg",
                    "../images/Villa_F6_Ste_Luce_Plage/05_vue_aerienne_piscine.jpg",
                    "../images/Villa_F6_Ste_Luce_Plage/06_salon_piscine.jpg"
                ],
                fallbackIcon: "🏖️"
            },
            {
                id: 6,
                name: "Villa F6 Petit Macabou",
                location: "Petit Macabou au Vauclin",
                price: 2000,
                guests: 13,
                guestsDetail: "10 à 13 personnes (14 max)",
                features: "Piscine, fêtes jusqu'à 150 convives",
                category: "sejour",
                image: "../images/Villa_F6_Petit_Macabou/02_salle_de_bain.jpg",
                gallery: [
                    "../images/Villa_F6_Petit_Macabou/02_salle_de_bain.jpg",
                    "../images/Villa_F6_Petit_Macabou/03_chambre_studio.jpg",
                    "../images/Villa_F6_Petit_Macabou/04_salon_mezzanine.jpg",
                    "../images/Villa_F6_Petit_Macabou/05_cuisine_moderne.jpg",
                    "../images/Villa_F6_Petit_Macabou/06_terrasse_couverte.jpg",
                    "../images/Villa_F6_Petit_Macabou/07_terrasse_piscine.jpg",
                    "../images/Villa_F6_Petit_Macabou/10_vue_aerienne_jour.jpg"
                ],
                fallbackIcon: "🎊"
            },
            {
                id: 7,
                name: "Villa F7 Baie des Mulets",
                location: "Baie des Mulets, Trinité",
                price: 2200,
                guests: 15,
                guestsDetail: "10 à 15 personnes (16 max)",
                features: "Vue mer exceptionnelle, piscine",
                category: "sejour",
                image: "../images/Villa_F7_Baie_des_Mulets/01_piscine_vue_mer.jpg",
                gallery: [
                    "../images/Villa_F7_Baie_des_Mulets/01_piscine_vue_mer.jpg"
                ],
                fallbackIcon: "🌊"
            },
            {
                id: 8,
                name: "Villa F3 Trinité (Cosmy)",
                location: "Cosmy, Trinité",
                price: 900,
                guests: 6,
                guestsDetail: "6 personnes + 9 convives",
                features: "Piscine, terrasse aménagée",
                category: "sejour",
                image: "../images/Villa_F3_Trinite_Cosmy/01_piscine_terrasse.jpg",
                gallery: [
                    "../images/Villa_F3_Trinite_Cosmy/01_piscine_terrasse.jpg"
                ],
                fallbackIcon: "🏝️"
            },
            {
                id: 9,
                name: "Villa F3 Le Robert",
                location: "Le Robert",
                price: 1000,
                guests: 6,
                guestsDetail: "6 personnes + 9 convives",
                features: "Piscine, proximité centre-ville",
                category: "sejour",
                image: "../images/Villa_F3_Le_Robert/01_piscine_jardin.jpg",
                gallery: [
                    "../images/Villa_F3_Le_Robert/01_piscine_jardin.jpg"
                ],
                fallbackIcon: "🏘️"
            },
            {
                id: 10,
                name: "Villa F5 R.Pilote",
                location: "Rivière-Pilote",
                price: 1200,
                guests: 8,
                guestsDetail: "8 personnes + 12 convives",
                features: "Piscine, grand jardin",
                category: "sejour",
                image: "../images/Villa_F5_R_Pilote/01_facade_piscine.jpg",
                gallery: [
                    "../images/Villa_F5_R_Pilote/01_facade_piscine.jpg"
                ],
                fallbackIcon: "🌳"
            },
            {
                id: 11,
                name: "Villa F3 Le François",
                location: "Le François",
                price: 1100,
                guests: 6,
                guestsDetail: "6 personnes + 9 convives",
                features: "Piscine, vue dégagée",
                category: "sejour",
                image: "../images/Villa_F3_Le_Francois/01_piscine_moderne.jpg",
                gallery: [
                    "../images/Villa_F3_Le_Francois/01_piscine_moderne.jpg"
                ],
                fallbackIcon: "🏞️"
            },
            {
                id: 12,
                name: "Villa F5 Vauclin Ravine Plate",
                location: "Ravine Plate, Le Vauclin",
                price: 1400,
                guests: 10,
                guestsDetail: "10 personnes + 15 convives",
                features: "Piscine, terrasses étagées",
                category: "sejour",
                image: "../images/Villa_F5_Vauclin_Ravine_Plate/01_piscine_terrasse.jpg",
                gallery: [
                    "../images/Villa_F5_Vauclin_Ravine_Plate/01_piscine_terrasse.jpg"
                ],
                fallbackIcon: "⛰️"
            },
            {
                id: 13,
                name: "Bas Villa F3 Ste Luce",
                location: "Ste Luce",
                price: 1300,
                guests: 8,
                guestsDetail: "8 personnes + 12 convives",
                features: "Piscine, proche plages",
                category: "sejour",
                image: "../images/Bas_Villa_F3_Ste_Luce/01_piscine_palmiers.jpg",
                gallery: [
                    "../images/Bas_Villa_F3_Ste_Luce/01_piscine_palmiers.jpg"
                ],
                fallbackIcon: "🌴"
            },
            {
                id: 14,
                name: "Villa F3 Trenelle",
                location: "Trenelle",
                price: 1600,
                guests: 6,
                guestsDetail: "6 personnes + 9 convives",
                features: "Piscine premium, environnement calme",
                category: "sejour",
                image: "../images/Villa_F3_Trenelle/01_piscine_moderne.jpg",
                gallery: [
                    "../images/Villa_F3_Trenelle/01_piscine_moderne.jpg"
                ],
                fallbackIcon: "🌿"
            },
            {
                id: 15,
                name: "Studio Cocooning Lamentin",
                location: "Lamentin",
                price: 600,
                guests: 2,
                guestsDetail: "2 personnes max",
                features: "Studio romantique, équipements modernes",
                category: "sejour",
                image: "../images/Studio_Cocooning_Lamentin/01_studio_moderne.jpg",
                gallery: [
                    "../images/Studio_Cocooning_Lamentin/01_studio_moderne.jpg"
                ],
                fallbackIcon: "💕"
            },
            {
                id: 16,
                name: "Espace Piscine Journée Bungalow",
                location: "Bungalow",
                price: 150,
                priceUnit: "€/jour",
                guests: 8,
                guestsDetail: "Jusqu'à 8 personnes",
                features: "Piscine, espace détente journée",
                category: "piscine",
                image: "../images/Espace_Piscine_Journee_Bungalow/01_piscine_detente.jpg",
                gallery: [
                    "../images/Espace_Piscine_Journee_Bungalow/01_piscine_detente.jpg"
                ],
                fallbackIcon: "☀️"
            },
            {
                id: 17,
                name: "Villa Fête Ducos",
                location: "Ducos",
                price: 200,
                priceUnit: "€/jour",
                guests: 25,
                guestsDetail: "Jusqu'à 25 personnes",
                features: "Espace fête, son autorisé",
                category: "fete",
                image: "../images/Villa_Fete_Ducos/01_espace_reception.jpg",
                gallery: [
                    "../images/Villa_Fete_Ducos/01_espace_reception.jpg"
                ],
                fallbackIcon: "🎉"
            },
            {
                id: 18,
                name: "Villa Fête Fort-de-France",
                location: "Fort-de-France",
                price: 180,
                priceUnit: "€/jour",
                guests: 20,
                guestsDetail: "Jusqu'à 20 personnes",
                features: "Centre-ville, espace modulable",
                category: "fete",
                image: "../images/Villa_Fete_Fort_de_France/01_salon_fete.jpg",
                gallery: [
                    "../images/Villa_Fete_Fort_de_France/01_salon_fete.jpg"
                ],
                fallbackIcon: "🏛️"
            },
            {
                id: 19,
                name: "Villa Fête Rivière-Pilote",
                location: "Rivière-Pilote",
                price: 250,
                priceUnit: "€/jour",
                guests: 35,
                guestsDetail: "Jusqu'à 35 personnes",
                features: "Grande capacité, jardin spacieux",
                category: "fete",
                image: "../images/Villa_Fete_Riviere_Pilote/01_grand_jardin.jpg",
                gallery: [
                    "../images/Villa_Fete_Riviere_Pilote/01_grand_jardin.jpg"
                ],
                fallbackIcon: "🎪"
            },
            {
                id: 20,
                name: "Villa Fête Sainte-Luce",
                location: "Sainte-Luce",
                price: 160,
                priceUnit: "€/jour",
                guests: 15,
                guestsDetail: "Jusqu'à 15 personnes",
                features: "Proximité plage, ambiance tropicale",
                category: "fete",
                image: "../images/Villa_Fete_Journee_Sainte_Luce/01_terrasse_fete.jpg",
                gallery: [
                    "../images/Villa_Fete_Journee_Sainte_Luce/01_terrasse_fete.jpg"
                ],
                fallbackIcon: "🏖️"
            },
            {
                id: 21,
                name: "Villa Fête Rivière-Salée",
                location: "Rivière-Salée",
                price: 160,
                priceUnit: "€/jour",
                guests: 15,
                guestsDetail: "Jusqu'à 15 personnes",
                features: "Piscine, tente couverte",
                category: "fete",
                image: "../images/Villa_Fete_Journee_Riviere_Salee/01_piscine_tente_couverte.jpg",
                gallery: [
                    "../images/Villa_Fete_Journee_Riviere_Salee/01_piscine_tente_couverte.jpg"
                ],
                fallbackIcon: "⛺"
            }
        ];

        // Fonction d'initialisation
        document.addEventListener('DOMContentLoaded', function() {
            console.log("🚀 Admin loaded with", villasData.length, "villas");
            displayVillas();
        });

        // Affichage des villas
        function displayVillas() {
            const container = document.getElementById('villasContainer');
            if (!container) return;

            container.innerHTML = villasData.map(villa => {
                const priceUnit = villa.priceUnit || '€/nuit';
                return `
                    <div class="villa-card p-3 mb-3">
                        <div class="row">
                            <div class="col-md-3">
                                <img src="${villa.image}" 
                                     alt="${villa.name}" 
                                     class="villa-image"
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div style="display: none; height: 150px; align-items: center; justify-content: center; font-size: 3rem; background: rgba(255,255,255,0.1); border-radius: 10px;">
                                    ${villa.fallbackIcon}
                                </div>
                            </div>
                            <div class="col-md-9">
                                <h5 class="text-white">#${villa.id} - ${villa.name}</h5>
                                <p class="text-white-50 mb-2">
                                    <i class="fas fa-map-marker-alt me-2"></i>${villa.location}
                                </p>
                                <p class="text-white mb-2">
                                    <i class="fas fa-euro-sign me-2"></i><strong>${villa.price} ${priceUnit}</strong>
                                </p>
                                <p class="text-white mb-2">
                                    <i class="fas fa-users me-2"></i>${villa.guestsDetail}
                                </p>
                                <p class="text-white-50 small mb-0">${villa.features}</p>
                                <span class="badge bg-success mt-2">${villa.category}</span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Fonction de synchronisation simple
        function syncWithMainSite() {
            console.log("🔄 Synchronizing 21 villas with main site...");
            
            // Convertir les données admin vers le format du site principal
            const mainSiteData = villasData.map(villa => ({
                id: villa.id,
                name: villa.name,
                location: villa.location,
                price: villa.price,
                guests: villa.guests,
                guestsDetail: villa.guestsDetail,
                features: villa.features,
                category: villa.category,
                image: villa.image,
                gallery: villa.gallery,
                fallbackIcon: villa.fallbackIcon,
                priceUnit: villa.priceUnit
            }));
            
            // Sauvegarder dans localStorage pour que index.html puisse les lire
            localStorage.setItem('khanelconcept_villas', JSON.stringify(mainSiteData));
            
            // Afficher notification
            showToast(`✅ Synchronisation réussie ! ${mainSiteData.length} villas mises à jour.`, 'success');
            
            console.log("✅ Sync completed -", mainSiteData.length, "villas synchronized");
        }

        // Affichage des toasts
        function showToast(message, type = 'success') {
            const toastElement = document.getElementById('syncToast');
            const toastMessage = document.getElementById('toastMessage');
            
            toastMessage.textContent = message;
            
            const toast = new bootstrap.Toast(toastElement);
            toast.show();
        }

        console.log("🎉 KhanelConcept Admin Ready - 21 villas loaded!");
    </script>
</body>
</html>